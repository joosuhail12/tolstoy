<svg width="700" height="550" xmlns="http://www.w3.org/2000/svg">
  <rect width="700" height="550" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
  <text x="350" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#495057">Payment Automation Workflow</text>
  
  <!-- Customer -->
  <rect x="50" y="70" width="120" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="8"/>
  <text x="110" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1976d2">Customer</text>
  <text x="110" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1976d2">Purchase Request</text>
  
  <!-- Tolstoy Platform -->
  <rect x="250" y="160" width="200" height="80" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="3" rx="10"/>
  <text x="350" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#7b1fa2">Tolstoy Platform</text>
  <text x="350" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7b1fa2">Payment Orchestration</text>
  <text x="350" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7b1fa2">Workflow Engine</text>
  
  <!-- Payment Steps -->
  <rect x="50" y="300" width="130" height="50" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="6"/>
  <text x="115" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f57c00">1. Validate</text>
  <text x="115" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#f57c00">Customer & Payment Info</text>
  
  <rect x="200" y="300" width="130" height="50" fill="#e8f5e8" stroke="#388e3c" stroke-width="2" rx="6"/>
  <text x="265" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#388e3c">2. Process</text>
  <text x="265" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#388e3c">Charge via Stripe</text>
  
  <rect x="350" y="300" width="130" height="50" fill="#e8eaf6" stroke="#3f51b5" stroke-width="2" rx="6"/>
  <text x="415" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#3f51b5">3. Fulfill</text>
  <text x="415" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#3f51b5">Send Product/Service</text>
  
  <rect x="500" y="300" width="130" height="50" fill="#fce4ec" stroke="#ad1457" stroke-width="2" rx="6"/>
  <text x="565" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ad1457">4. Notify</text>
  <text x="565" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ad1457">Confirmation & Receipt</text>
  
  <!-- External Services -->
  <rect x="50" y="420" width="100" height="50" fill="#ffecb3" stroke="#ffa000" stroke-width="2" rx="5"/>
  <text x="100" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffa000">Stripe</text>
  <text x="100" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ffa000">Payment Gateway</text>
  
  <rect x="170" y="420" width="100" height="50" fill="#c8e6c9" stroke="#4caf50" stroke-width="2" rx="5"/>
  <text x="220" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4caf50">Shopify</text>
  <text x="220" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4caf50">E-commerce Platform</text>
  
  <rect x="290" y="420" width="100" height="50" fill="#ffcdd2" stroke="#f44336" stroke-width="2" rx="5"/>
  <text x="340" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f44336">SendGrid</text>
  <text x="340" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f44336">Email Service</text>
  
  <rect x="410" y="420" width="100" height="50" fill="#d1c4e9" stroke="#9c27b0" stroke-width="2" rx="5"/>
  <text x="460" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#9c27b0">Slack</text>
  <text x="460" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9c27b0">Team Notifications</text>
  
  <rect x="530" y="420" width="100" height="50" fill="#b3e5fc" stroke="#03a9f4" stroke-width="2" rx="5"/>
  <text x="580" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#03a9f4">Analytics</text>
  <text x="580" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#03a9f4">Business Intelligence</text>
  
  <!-- Error Handling -->
  <rect x="520" y="160" width="130" height="80" fill="#ffebee" stroke="#d32f2f" stroke-width="2" rx="8"/>
  <text x="585" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#d32f2f">Error Handling</text>
  <text x="585" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#d32f2f">• Payment Failures</text>
  <text x="585" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#d32f2f">• Retry Logic</text>
  <text x="585" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#d32f2f">• Refund Processing</text>
  
  <!-- Flow Arrows -->
  <path d="M 170 100 L 250 190" stroke="#666" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="210" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">initiates</text>
  
  <path d="M 350 240 L 115 300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M 350 240 L 265 300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M 350 240 L 415 300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M 350 240 L 565 300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <path d="M 115 350 L 100 420" stroke="#ffa000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M 265 350 L 220 420" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M 415 350 L 340 420" stroke="#f44336" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M 565 350 L 460 420" stroke="#9c27b0" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M 565 350 L 580 420" stroke="#03a9f4" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <path d="M 450 200 L 520 200" stroke="#d32f2f" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Success/Failure indicators -->
  <circle cx="150" cy="500" r="8" fill="#4caf50"/>
  <text x="170" y="505" font-family="Arial, sans-serif" font-size="11" fill="#4caf50">Success Path</text>
  
  <circle cx="350" cy="500" r="8" fill="#f44336"/>
  <text x="370" y="505" font-family="Arial, sans-serif" font-size="11" fill="#f44336">Error Handling</text>
  
  <circle cx="520" cy="500" r="8" fill="#ff9800"/>
  <text x="540" y="505" font-family="Arial, sans-serif" font-size="11" fill="#ff9800">Retry Mechanism</text>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
</svg>