---
title: "tolstoy init"
description: "Initialize a new Tolstoy project or workspace configuration"
---

# tolstoy init

Initialize a new Tolstoy project in the current directory or create a workspace configuration for managing workflows, actions, and tools as code.

## Synopsis

```bash
tolstoy init [project-name] [options]
```

## Description

The `init` command creates a new Tolstoy project structure with configuration files, templates, and directory structure for managing your workflows, actions, and tools as code. This enables version control, collaboration, and automated deployment of your Tolstoy configurations.

## Arguments

<ParamField name="project-name" type="string">
  Name of the project to create. If omitted, initializes in the current directory.
</ParamField>

## Options

<ParamField name="--template" type="string" default="basic">
  Project template to use
  
  **Available templates:**
  - `basic`: Simple project with essential configuration
  - `full`: Complete project with examples for all resources
  - `monorepo`: Multi-environment project structure
  - `ci-cd`: Project optimized for continuous integration
</ParamField>

<ParamField name="--org-id" type="string">
  Organization ID to associate with this project
</ParamField>

<ParamField name="--git" type="boolean" default="true">
  Initialize Git repository and add appropriate .gitignore
</ParamField>

<ParamField name="--install-deps" type="boolean" default="true">
  Install project dependencies (if using Node.js template)
</ParamField>

<ParamField name="--interactive" type="boolean" default="false">
  Run in interactive mode with guided setup
</ParamField>

<ParamField name="--force" type="boolean" default="false">
  Overwrite existing files if project directory exists
</ParamField>

## Examples

<CodeGroup>
```bash Basic Project
# Initialize basic project
tolstoy init my-workflows

# Initialize in current directory
tolstoy init .

# Interactive setup
tolstoy init --interactive
```

```bash Advanced Templates
# Full project with examples
tolstoy init my-project --template full

# CI/CD optimized project
tolstoy init automation-workflows --template ci-cd

# Monorepo structure
tolstoy init company-workflows --template monorepo
```

```bash Custom Configuration
# Specify organization
tolstoy init --org-id org_abc123def456

# Skip Git initialization
tolstoy init my-project --no-git

# Force overwrite existing directory
tolstoy init existing-project --force
```
</CodeGroup>

## Interactive Mode

When using `--interactive`, the CLI guides you through project setup:

```bash
tolstoy init --interactive

? Project name: my-workflows
? Project template: Full (with examples)
? Organization: Acme Corp (org_abc123def456)
? Initialize Git repository? Yes
? Include example workflows? Yes
? Include CI/CD configuration? Yes
? Install dependencies? Yes

âœ“ Project created successfully!
```

## Project Structure

The `init` command creates the following structure:

<Tabs>
  <Tab title="Basic Template">
    ```
    my-workflows/
    â”œâ”€â”€ .tolstoy/
    â”‚   â”œâ”€â”€ config.yaml          # Project configuration
    â”‚   â””â”€â”€ .env.example         # Environment variables template
    â”œâ”€â”€ tools/
    â”‚   â””â”€â”€ .gitkeep
    â”œâ”€â”€ actions/
    â”‚   â””â”€â”€ .gitkeep  
    â”œâ”€â”€ workflows/
    â”‚   â””â”€â”€ .gitkeep
    â”œâ”€â”€ .gitignore              # Git ignore rules
    â”œâ”€â”€ README.md               # Project documentation
    â””â”€â”€ package.json            # Project metadata
    ```
  </Tab>
  
  <Tab title="Full Template">
    ```
    my-workflows/
    â”œâ”€â”€ .tolstoy/
    â”‚   â”œâ”€â”€ config.yaml
    â”‚   â”œâ”€â”€ .env.example
    â”‚   â””â”€â”€ hooks/              # Custom hooks
    â”œâ”€â”€ tools/
    â”‚   â”œâ”€â”€ stripe.yaml         # Example Stripe integration
    â”‚   â”œâ”€â”€ sendgrid.yaml       # Example SendGrid integration
    â”‚   â””â”€â”€ slack.yaml          # Example Slack integration
    â”œâ”€â”€ actions/
    â”‚   â”œâ”€â”€ payments/
    â”‚   â”‚   â”œâ”€â”€ create-customer.yaml
    â”‚   â”‚   â””â”€â”€ process-payment.yaml
    â”‚   â”œâ”€â”€ emails/
    â”‚   â”‚   â””â”€â”€ send-welcome.yaml
    â”‚   â””â”€â”€ notifications/
    â”‚       â””â”€â”€ post-slack.yaml
    â”œâ”€â”€ workflows/
    â”‚   â”œâ”€â”€ customer-onboarding.yaml
    â”‚   â”œâ”€â”€ payment-processing.yaml
    â”‚   â””â”€â”€ notification-system.yaml
    â”œâ”€â”€ tests/
    â”‚   â”œâ”€â”€ actions/            # Action tests
    â”‚   â””â”€â”€ workflows/          # Workflow tests
    â”œâ”€â”€ docs/
    â”‚   â”œâ”€â”€ architecture.md
    â”‚   â””â”€â”€ deployment.md
    â”œâ”€â”€ scripts/
    â”‚   â”œâ”€â”€ deploy.sh
    â”‚   â””â”€â”€ test.sh
    â”œâ”€â”€ .github/
    â”‚   â””â”€â”€ workflows/
    â”‚       â”œâ”€â”€ test.yml
    â”‚       â””â”€â”€ deploy.yml
    â”œâ”€â”€ .gitignore
    â”œâ”€â”€ README.md
    â””â”€â”€ package.json
    ```
  </Tab>
  
  <Tab title="Monorepo Template">
    ```
    company-workflows/
    â”œâ”€â”€ .tolstoy/
    â”‚   â”œâ”€â”€ config.yaml
    â”‚   â””â”€â”€ environments/
    â”‚       â”œâ”€â”€ development.yaml
    â”‚       â”œâ”€â”€ staging.yaml
    â”‚       â””â”€â”€ production.yaml
    â”œâ”€â”€ shared/
    â”‚   â”œâ”€â”€ tools/              # Shared tool configurations
    â”‚   â””â”€â”€ actions/            # Reusable actions
    â”œâ”€â”€ environments/
    â”‚   â”œâ”€â”€ development/
    â”‚   â”‚   â”œâ”€â”€ tools/
    â”‚   â”‚   â”œâ”€â”€ actions/
    â”‚   â”‚   â””â”€â”€ workflows/
    â”‚   â”œâ”€â”€ staging/
    â”‚   â”‚   â”œâ”€â”€ tools/
    â”‚   â”‚   â”œâ”€â”€ actions/
    â”‚   â”‚   â””â”€â”€ workflows/
    â”‚   â””â”€â”€ production/
    â”‚       â”œâ”€â”€ tools/
    â”‚       â”œâ”€â”€ actions/
    â”‚       â””â”€â”€ workflows/
    â”œâ”€â”€ scripts/
    â”‚   â”œâ”€â”€ deploy-env.sh
    â”‚   â””â”€â”€ promote.sh
    â””â”€â”€ README.md
    ```
  </Tab>
</Tabs>

## Configuration Files

### .tolstoy/config.yaml

Main project configuration file:

```yaml
# Project metadata
name: "my-workflows"
description: "Company workflow automation"
version: "1.0.0"

# Organization settings
organization:
  id: "org_abc123def456"
  name: "Acme Corp"

# Environment configuration
environments:
  default: "development"
  available:
    - development
    - staging  
    - production

# Deployment settings
deploy:
  strategy: "incremental"
  validation: true
  rollback: true

# File patterns
patterns:
  tools: "tools/**/*.yaml"
  actions: "actions/**/*.yaml"
  workflows: "workflows/**/*.yaml"

# CLI defaults
defaults:
  output: "table"
  timeout: 30
```

### Environment Variables

The `.env.example` file provides a template for environment-specific configuration:

```bash
# Tolstoy Configuration
TOLSTOY_ORG_ID=org_abc123def456
TOLSTOY_API_URL=https://tolstoy.getpullse.com

# Authentication
TOLSTOY_TOKEN=your-auth-token-here

# Environment
ENVIRONMENT=development

# External Service API Keys (examples)
STRIPE_API_KEY=sk_test_...
SENDGRID_API_KEY=SG....
SLACK_BOT_TOKEN=xoxb-...
```

## Example Resource Files

### Tool Configuration (tools/stripe.yaml)

```yaml
name: "Stripe API"
description: "Stripe payment processing"
baseUrl: "https://api.stripe.com/v1"
authType: "bearer_token"
authConfig:
  tokenPrefix: "Bearer"
headers:
  "User-Agent": "Tolstoy/1.0"
  "Stripe-Version": "2022-11-15"
```

### Action Configuration (actions/payments/create-customer.yaml)

```yaml
name: "Create Stripe Customer"
description: "Creates a new customer in Stripe"
toolRef: "stripe"
method: "POST"
endpoint: "/customers"
inputSchema:
  - name: "email"
    type: "string"
    required: true
    validation:
      format: "email"
  - name: "name"
    type: "string" 
    required: true
    validation:
      minLength: 1
      maxLength: 100
  - name: "metadata"
    type: "object"
    required: false
    default: {}
```

### Workflow Configuration (workflows/customer-onboarding.yaml)

```yaml
name: "Customer Onboarding"
description: "Complete customer onboarding flow"
triggers:
  - type: "webhook"
    path: "/onboard-customer"
steps:
  - name: "Create Customer"
    action: "payments/create-customer"
    input:
      email: "{{ trigger.email }}"
      name: "{{ trigger.name }}"
      metadata:
        source: "webhook"
        timestamp: "{{ now }}"
        
  - name: "Send Welcome Email"
    action: "emails/send-welcome"
    input:
      to: "{{ steps.create_customer.email }}"
      customerName: "{{ steps.create_customer.name }}"
      customerId: "{{ steps.create_customer.id }}"
      
  - name: "Notify Team"
    action: "notifications/post-slack"
    input:
      channel: "#sales"
      message: "New customer: {{ steps.create_customer.name }}"
```

## Git Integration

When `--git` is enabled (default), the command:

1. Initializes a Git repository
2. Creates appropriate `.gitignore` file
3. Makes initial commit with project structure
4. Sets up Git hooks for validation (optional)

### Generated .gitignore

```gitignore
# Tolstoy
.tolstoy/.env
.tolstoy/cache/
*.log

# Dependencies
node_modules/
.npm/

# Environment files
.env
.env.local
.env.*.local

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db
```

## Post-Initialization Steps

After running `tolstoy init`, the CLI provides next steps:

```bash
âœ… Project initialized successfully!

ğŸ“ Project created at: ./my-workflows
ğŸ¢ Organization: Acme Corp (org_abc123def456)
ğŸ“‹ Template: Full project with examples

Next steps:
  1. cd my-workflows
  2. cp .tolstoy/.env.example .tolstoy/.env
  3. Edit .tolstoy/.env with your API keys
  4. tolstoy tools deploy
  5. tolstoy actions deploy
  6. tolstoy workflows deploy

Documentation:
  ğŸ“– README.md - Project overview
  ğŸ“š docs/ - Detailed documentation
  ğŸ§ª tests/ - Example tests

Get help:
  tolstoy --help
  tolstoy docs open
```

## Validation

The CLI validates the project structure after initialization:

<AccordionGroup>
  <Accordion title="Configuration Validation">
    - Checks YAML syntax in all configuration files
    - Validates required fields and data types
    - Ensures organization ID exists and is accessible
    - Verifies template compatibility
  </Accordion>
  
  <Accordion title="File Structure Validation">
    - Confirms all required directories exist
    - Checks file permissions
    - Validates example configurations
    - Ensures Git repository is properly initialized
  </Accordion>
  
  <Accordion title="Dependency Validation">
    - Verifies CLI version compatibility
    - Checks for required system dependencies
    - Validates network connectivity to Tolstoy API
    - Tests authentication if token provided
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Directory Already Exists">
    ```bash
    Error: Directory 'my-workflows' already exists
    
    # Solutions:
    tolstoy init my-workflows --force    # Overwrite existing
    tolstoy init other-name             # Use different name
    rm -rf my-workflows && tolstoy init my-workflows  # Remove and recreate
    ```
  </Accordion>
  
  <Accordion title="Permission Denied">
    ```bash
    Error: EACCES: permission denied
    
    # Solutions:
    sudo tolstoy init my-workflows      # Run with elevated permissions
    mkdir ~/my-workflows && cd ~/my-workflows && tolstoy init .  # Create in home directory
    ```
  </Accordion>
  
  <Accordion title="Network/Authentication Errors">
    ```bash
    Error: Failed to validate organization
    
    # Solutions:
    tolstoy auth login                  # Authenticate first
    tolstoy init --org-id correct-id   # Use correct organization ID
    tolstoy init --skip-validation     # Skip online validation
    ```
  </Accordion>
</AccordionGroup>

## Related Commands

<CardGroup cols={2}>
  <Card title="tolstoy auth login" icon="key" href="/cli/commands/auth/login">
    Authenticate before initializing projects
  </Card>
  <Card title="tolstoy deploy" icon="upload" href="/cli/commands/deploy/deploy">
    Deploy project resources to Tolstoy
  </Card>
  <Card title="tolstoy validate" icon="check" href="/cli/commands/validate/validate">
    Validate project configuration
  </Card>
  <Card title="tolstoy org list" icon="building" href="/cli/commands/organizations/list">
    List available organizations
  </Card>
</CardGroup>

---

<Snippet file="cli-footer.mdx" />