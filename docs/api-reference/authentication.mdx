---
title: Authentication
description: Learn how to authenticate with the Tolstoy API
---

# Authentication

The Tolstoy API uses API key authentication for secure access to all endpoints. This guide covers how to obtain and use your API keys.

## API Keys

API keys are the primary method for authenticating with the Tolstoy API. Each key is tied to your organization and provides access to your workflows, executions, and other resources.

### Getting Your API Key

1. Log in to the [Tolstoy Dashboard](https://app.tolstoy.dev)
2. Navigate to **Settings** → **API Keys**
3. Click **Create New API Key**
4. Give your key a descriptive name
5. Copy the generated key (you won't be able to see it again)

<Warning>
Store your API keys securely and never commit them to version control. Treat them like passwords.
</Warning>

## Authentication Methods

### Bearer Token

The recommended method is to include your API key in the `Authorization` header using the Bearer token format:

```bash
curl -H "Authorization: Bearer sk_live_1234567890abcdef" \
     https://api.tolstoy.dev/v1/flows
```

### Header Authentication

Alternatively, you can use the `X-API-Key` header:

```bash
curl -H "X-API-Key: sk_live_1234567890abcdef" \
     https://api.tolstoy.dev/v1/flows
```

## API Key Types

Tolstoy provides different types of API keys for different environments:

### Live Keys
- **Format:** `sk_live_...`
- **Environment:** Production
- **Permissions:** Full access to production resources
- **Rate Limits:** Higher limits for production workloads

### Test Keys
- **Format:** `sk_test_...`
- **Environment:** Development/Testing
- **Permissions:** Access to test resources only
- **Rate Limits:** Lower limits, suitable for development

<Note>
Test keys operate in a completely isolated environment and cannot access production data or trigger real workflows.
</Note>

## SDK Authentication

When using our official SDKs, authentication is handled automatically:

<CodeGroup>
```javascript Node.js
import { Client } from '@tolstoy/sdk';

const client = new Client({
  apiKey: 'sk_live_1234567890abcdef'  // Your API key
});

// All requests are automatically authenticated
const flows = await client.flows.list();
```

```python Python
from tolstoy import Client

client = Client(api_key='sk_live_1234567890abcdef')

# All requests are automatically authenticated
flows = client.flows.list()
```

```go Go
package main

import (
    "github.com/tolstoy/tolstoy-go"
)

func main() {
    client := tolstoy.NewClient(&tolstoy.Config{
        APIKey: "sk_live_1234567890abcdef",
    })
    
    // All requests are automatically authenticated
    flows, err := client.Flows.List()
}
```
</CodeGroup>

## Environment Variables

For security and convenience, store your API key in environment variables:

```bash
export TOLSTOY_API_KEY="sk_live_1234567890abcdef"
```

Then reference it in your code:

<CodeGroup>
```javascript Node.js
const client = new Client({
  apiKey: process.env.TOLSTOY_API_KEY
});
```

```python Python
import os
from tolstoy import Client

client = Client(api_key=os.getenv('TOLSTOY_API_KEY'))
```

```bash cURL
curl -H "Authorization: Bearer $TOLSTOY_API_KEY" \
     https://api.tolstoy.dev/v1/flows
```
</CodeGroup>

## Testing Authentication

Verify your authentication is working with a simple status check:

<CodeGroup>
```bash cURL
curl -H "Authorization: Bearer sk_live_1234567890abcdef" \
     https://api.tolstoy.dev/v1/status
```

```javascript Node.js
const status = await client.health.getStatus();
console.log('Authentication successful:', status);
```

```python Python
status = client.health.get_status()
print(f'Authentication successful: {status}')
```
</CodeGroup>

**Expected Response:**
```json
{
  "status": "healthy",
  "authenticated": true,
  "organization_id": "org_1234567890",
  "environment": "live"
}
```

## Error Responses

Authentication errors return specific HTTP status codes:

### 401 Unauthorized
Missing or invalid API key:

```json
{
  "error": {
    "type": "authentication_error",
    "message": "Invalid API key provided",
    "code": "invalid_api_key"
  }
}
```

### 403 Forbidden
Valid API key but insufficient permissions:

```json
{
  "error": {
    "type": "permission_error",
    "message": "Insufficient permissions for this resource",
    "code": "insufficient_permissions"
  }
}
```

## Rate Limiting

API keys are subject to rate limits based on your plan:

| Plan | Requests per minute | Burst limit |
|------|-------------------|-------------|
| Free | 100 | 200 |
| Pro | 1,000 | 2,000 |
| Enterprise | 10,000 | 20,000 |

Rate limit information is included in response headers:

```http
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1609459200
```

When rate limits are exceeded, you'll receive a `429 Too Many Requests` response:

```json
{
  "error": {
    "type": "rate_limit_error",
    "message": "Rate limit exceeded",
    "retry_after": 60
  }
}
```

## Best Practices

### Security
- Never commit API keys to version control
- Use environment variables for key storage
- Rotate keys regularly (every 90 days recommended)
- Use test keys for development and CI/CD
- Revoke unused or compromised keys immediately

### Performance
- Reuse HTTP connections when possible
- Implement exponential backoff for retries
- Cache responses when appropriate
- Monitor rate limit headers

### Organization
- Use descriptive names for API keys
- Create separate keys for different applications
- Document which services use which keys
- Set up monitoring for key usage

## Key Management

### Rotating Keys
To rotate an API key safely:

1. Create a new API key in the dashboard
2. Update your application configuration
3. Deploy the changes
4. Verify the new key is working
5. Revoke the old key

### Revoking Keys
To revoke a compromised or unused key:

1. Go to **Settings** → **API Keys** in the dashboard
2. Find the key to revoke
3. Click **Revoke** and confirm
4. The key will be immediately disabled

<Warning>
Revoking a key will immediately disable all applications using it. Make sure to update your applications first.
</Warning>

## Next Steps

Now that you understand authentication, explore these related topics:

<CardGroup cols={2}>
  <Card title="Create Your First Flow" icon="rocket" href="/api-reference/flows">
    Learn how to create and manage workflows
  </Card>
  <Card title="Execute Actions" icon="play" href="/api-reference/actions">
    Discover available actions and how to use them
  </Card>
  <Card title="Monitor Executions" icon="chart-line" href="/api-reference/executions">
    Track workflow execution and results
  </Card>
  <Card title="SDK Overview" icon="code" href="/sdk/overview">
    Use our official SDKs for easier integration
  </Card>
</CardGroup>