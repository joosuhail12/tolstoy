---
title: "List Execution Logs"
description: "Retrieve execution logs for actions and flows"
---

# List Execution Logs

<Badge variant="success">GET</Badge> `/execution-logs`

Retrieve paginated execution logs for debugging and monitoring action and flow executions.

## Request

### **HTTP Request**

```http
GET https://api.tolstoy.dev/execution-logs
```

### **Query Parameters**

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `limit` | integer | 50 | Number of logs per page (1-1000) |
| `cursor` | string | - | Pagination cursor for next page |
| `execution_id` | string | - | Filter by specific execution ID |
| `flow_id` | string | - | Filter by flow ID |
| `action_id` | string | - | Filter by action ID |
| `status` | string | - | Filter by status (`success`, `failed`, `timeout`, `cancelled`) |
| `level` | string | - | Filter by log level (`debug`, `info`, `warn`, `error`) |
| `start_time` | string | - | Filter by start time (ISO 8601) |
| `end_time` | string | - | Filter by end time (ISO 8601) |
| `search` | string | - | Search log messages |

## Response

### **Success Response**

<CodeGroup>

```json 200 OK
{
  "logs": [
    {
      "id": "log_abc123xyz456",
      "execution_id": "exec_flow_789xyz123",
      "flow_id": "flow_customer_onboarding",
      "flow_name": "Customer Onboarding Flow",
      "action_id": "act_send_email",
      "action_name": "Send Welcome Email",
      "step_id": "step_3",
      "step_name": "send_welcome_email",
      "timestamp": "2024-01-15T20:00:02.150Z",
      "level": "info",
      "message": "Email sent successfully to john.doe@example.com",
      "details": {
        "provider": "sendgrid",
        "message_id": "msg_987654321",
        "recipients": ["john.doe@example.com"],
        "subject": "Welcome to Tolstoy!",
        "template": "welcome_email",
        "variables": {
          "name": "John Doe",
          "plan": "professional"
        },
        "delivery_time_ms": 856
      },
      "context": {
        "trace_id": "trace_onboarding_001",
        "user_id": "user_123456789",
        "organization_id": "org_987654321",
        "execution_attempt": 1,
        "retry_count": 0
      },
      "metrics": {
        "duration_ms": 856,
        "memory_usage_mb": 12.4,
        "cpu_usage_percent": 5.2
      }
    },
    {
      "id": "log_def456uvw789",
      "execution_id": "exec_flow_789xyz123",
      "flow_id": "flow_customer_onboarding",
      "flow_name": "Customer Onboarding Flow",
      "action_id": "act_create_salesforce_lead",
      "action_name": "Create Salesforce Lead",
      "step_id": "step_2",
      "step_name": "create_crm_record",
      "timestamp": "2024-01-15T20:00:01.800Z",
      "level": "warn",
      "message": "Salesforce API rate limit approaching",
      "details": {
        "provider": "salesforce",
        "rate_limit_remaining": 15,
        "rate_limit_reset": "2024-01-15T20:01:00Z",
        "request_delay_ms": 200,
        "lead_id": "00Q1234567890ABC"
      },
      "context": {
        "trace_id": "trace_onboarding_001",
        "user_id": "user_123456789",
        "organization_id": "org_987654321",
        "execution_attempt": 1,
        "retry_count": 0
      },
      "metrics": {
        "duration_ms": 1423,
        "memory_usage_mb": 8.9,
        "cpu_usage_percent": 3.1
      }
    },
    {
      "id": "log_ghi789abc012",
      "execution_id": "exec_action_456def",
      "flow_id": null,
      "action_id": "act_query_database",
      "action_name": "Query Database",
      "step_id": null,
      "step_name": null,
      "timestamp": "2024-01-15T19:58:45.330Z",
      "level": "error",
      "message": "Database query timeout",
      "details": {
        "provider": "postgresql",
        "query": "SELECT COUNT(*) FROM large_table WHERE complex_condition = $1",
        "parameters": ["value123"],
        "timeout_ms": 30000,
        "connection_id": "conn_postgres_main",
        "error_code": "QUERY_TIMEOUT"
      },
      "context": {
        "trace_id": "trace_analytics_report",
        "user_id": "user_456789012",
        "organization_id": "org_987654321",
        "execution_attempt": 3,
        "retry_count": 2
      },
      "metrics": {
        "duration_ms": 30000,
        "memory_usage_mb": 45.2,
        "cpu_usage_percent": 12.8
      },
      "stack_trace": [
        "QueryTimeoutError: Query timeout after 30000ms",
        "  at Database.query (/app/lib/database.js:156:15)",
        "  at Action.execute (/app/lib/actions/database.js:89:23)",
        "  at ExecutionEngine.runStep (/app/lib/execution.js:234:18)"
      ]
    }
  ],
  "pagination": {
    "limit": 50,
    "count": 3,
    "has_more": true,
    "next_cursor": "eyJsYXN0X2lkIjoibG9nX2doaTc4OWFiYzAxMiIsImxhc3RfdGltZXN0YW1wIjoxNzA1MzQ5OTI1MzMwfQ==",
    "prev_cursor": null,
    "total_estimate": 1247
  }
}
```

</CodeGroup>

## Examples

### **Basic Request**

<CodeGroup>

```bash cURL
curl -X GET 'https://api.tolstoy.dev/execution-logs' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json'
```

```javascript JavaScript
const response = await fetch('https://api.tolstoy.dev/execution-logs', {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  }
});

const data = await response.json();
console.log(`Found ${data.logs.length} log entries`);

data.logs.forEach(log => {
  const levelIcon = {
    'debug': '🔍',
    'info': 'ℹ️',
    'warn': '⚠️',
    'error': '❌'
  }[log.level] || '📝';
  
  console.log(`${levelIcon} [${log.timestamp}] ${log.message}`);
  
  if (log.flow_name) {
    console.log(`  Flow: ${log.flow_name} > Step: ${log.step_name}`);
  } else {
    console.log(`  Action: ${log.action_name}`);
  }
  
  console.log(`  Duration: ${log.metrics.duration_ms}ms`);
  
  if (log.level === 'error' && log.stack_trace) {
    console.log(`  Error: ${log.stack_trace[0]}`);
  }
});
```

```python Python
import requests
from datetime import datetime

response = requests.get(
    'https://api.tolstoy.dev/execution-logs',
    headers={
        'Authorization': f'Bearer {api_key}',
        'Content-Type': 'application/json'
    },
    params={
        'level': 'error',
        'limit': 100
    }
)

if response.status_code == 200:
    data = response.json()
    print(f"Found {len(data['logs'])} error logs")
    
    for log in data['logs']:
        timestamp = datetime.fromisoformat(log['timestamp'].replace('Z', '+00:00'))
        print(f"❌ [{timestamp.strftime('%H:%M:%S')}] {log['message']}")
        
        if log['flow_name']:
            print(f"   Flow: {log['flow_name']} > {log['step_name']}")
        else:
            print(f"   Action: {log['action_name']}")
        
        if 'error_code' in log['details']:
            print(f"   Code: {log['details']['error_code']}")
```

</CodeGroup>

### **Filter by Execution**

<CodeGroup>

```bash Get Logs for Specific Execution
curl -X GET 'https://api.tolstoy.dev/execution-logs?execution_id=exec_flow_789xyz123' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json'
```

```javascript Flow Execution Debug
async function debugFlowExecution(executionId, apiKey) {
  const response = await fetch(
    `https://api.tolstoy.dev/execution-logs?execution_id=${executionId}&limit=1000`,
    {
      headers: {
        'Authorization': `Bearer ${apiKey}`,
        'Content-Type': 'application/json'
      }
    }
  );
  
  const { logs } = await response.json();
  
  console.log(`Execution Debug: ${executionId}`);
  console.log('================================');
  
  // Group logs by step
  const logsByStep = logs.reduce((acc, log) => {
    const key = log.step_id || 'flow';
    acc[key] = acc[key] || [];
    acc[key].push(log);
    return acc;
  }, {});
  
  // Show execution timeline
  Object.entries(logsByStep).forEach(([stepId, stepLogs]) => {
    const stepName = stepLogs[0].step_name || 'Flow Level';
    console.log(`\n📋 ${stepName} (${stepId}):`);
    
    stepLogs
      .sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp))
      .forEach(log => {
        const time = new Date(log.timestamp).toLocaleTimeString();
        const levelIcon = {
          'debug': '🔍',
          'info': 'ℹ️',
          'warn': '⚠️',
          'error': '❌'
        }[log.level];
        
        console.log(`   ${levelIcon} [${time}] ${log.message}`);
        
        if (log.level === 'error' && log.details.error_code) {
          console.log(`      Error Code: ${log.details.error_code}`);
        }
        
        if (log.metrics.duration_ms > 1000) {
          console.log(`      Duration: ${log.metrics.duration_ms}ms`);
        }
      });
  });
  
  // Summary
  const errors = logs.filter(l => l.level === 'error');
  const warnings = logs.filter(l => l.level === 'warn');
  
  console.log(`\n📊 Summary:`);
  console.log(`   Total logs: ${logs.length}`);
  console.log(`   Errors: ${errors.length}`);
  console.log(`   Warnings: ${warnings.length}`);
  
  if (errors.length > 0) {
    console.log('\n🔴 Errors encountered:');
    errors.forEach(error => {
      console.log(`   - ${error.message}`);
      if (error.details.error_code) {
        console.log(`     Code: ${error.details.error_code}`);
      }
    });
  }
  
  return { logs, errors, warnings };
}

// Usage
await debugFlowExecution('exec_flow_789xyz123', apiKey);
```

</CodeGroup>

### **Real-time Log Streaming**

<CodeGroup>

```javascript Log Stream Monitor
class LogStreamMonitor {
  constructor(apiKey) {
    this.apiKey = apiKey;
    this.lastCursor = null;
    this.isRunning = false;
  }
  
  async streamLogs(filters = {}, onLog = null) {
    this.isRunning = true;
    
    while (this.isRunning) {
      try {
        const params = new URLSearchParams({
          limit: '100',
          level: 'error', // Only errors for real-time alerts
          ...filters
        });
        
        if (this.lastCursor) {
          params.set('cursor', this.lastCursor);
        }
        
        const response = await fetch(
          `https://api.tolstoy.dev/execution-logs?${params}`,
          {
            headers: {
              'Authorization': `Bearer ${this.apiKey}`,
              'Content-Type': 'application/json'
            }
          }
        );
        
        const data = await response.json();
        
        // Process new logs
        if (data.logs.length > 0) {
          data.logs.forEach(log => {
            if (onLog) {
              onLog(log);
            } else {
              this.handleLog(log);
            }
          });
          
          this.lastCursor = data.pagination.next_cursor;
        }
        
        // Wait before next poll
        await new Promise(resolve => setTimeout(resolve, 5000));
        
      } catch (error) {
        console.error('Log streaming error:', error);
        await new Promise(resolve => setTimeout(resolve, 10000));
      }
    }
  }
  
  handleLog(log) {
    const timestamp = new Date(log.timestamp).toLocaleTimeString();
    
    if (log.level === 'error') {
      console.error(`🔴 [${timestamp}] ${log.message}`);
      
      if (log.flow_name) {
        console.error(`   Flow: ${log.flow_name} > ${log.step_name}`);
      } else {
        console.error(`   Action: ${log.action_name}`);
      }
      
      if (log.details.error_code) {
        console.error(`   Code: ${log.details.error_code}`);
      }
      
      // Alert for critical errors
      if (log.details.error_code === 'CRITICAL_SYSTEM_ERROR') {
        this.sendAlert(log);
      }
    }
  }
  
  async sendAlert(log) {
    // Send critical error alert
    console.log('🚨 CRITICAL ERROR DETECTED - Sending alert...');
    
    try {
      await fetch('https://api.tolstoy.dev/actions/act_critical_alert/execute', {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${this.apiKey}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          inputs: {
            message: `Critical error in ${log.flow_name || log.action_name}: ${log.message}`,
            execution_id: log.execution_id,
            error_code: log.details.error_code,
            timestamp: log.timestamp
          }
        })
      });
    } catch (error) {
      console.error('Failed to send critical alert:', error);
    }
  }
  
  stop() {
    this.isRunning = false;
  }
}

// Usage
const logMonitor = new LogStreamMonitor(apiKey);

// Custom log handler
logMonitor.streamLogs(
  { level: 'error' },
  (log) => {
    // Custom handling for error logs
    console.log(`Error in ${log.action_name}: ${log.message}`);
    
    // Store in local error tracking
    errorTracker.record(log);
  }
);

// Stop monitoring
// logMonitor.stop();
```

</CodeGroup>

### **Log Analysis**

<CodeGroup>

```javascript Error Pattern Analysis
async function analyzeErrorPatterns(apiKey, hours = 24) {
  const endTime = new Date();
  const startTime = new Date(endTime.getTime() - (hours * 60 * 60 * 1000));
  
  const params = new URLSearchParams({
    level: 'error',
    start_time: startTime.toISOString(),
    end_time: endTime.toISOString(),
    limit: '1000'
  });
  
  const response = await fetch(
    `https://api.tolstoy.dev/execution-logs?${params}`,
    {
      headers: {
        'Authorization': `Bearer ${apiKey}`,
        'Content-Type': 'application/json'
      }
    }
  );
  
  const { logs } = await response.json();
  
  // Analyze error patterns
  const analysis = {
    totalErrors: logs.length,
    byAction: {},
    byFlow: {},
    byErrorCode: {},
    byHour: {},
    mostCommonErrors: []
  };
  
  logs.forEach(log => {
    // Count by action
    if (log.action_name) {
      analysis.byAction[log.action_name] = 
        (analysis.byAction[log.action_name] || 0) + 1;
    }
    
    // Count by flow
    if (log.flow_name) {
      analysis.byFlow[log.flow_name] = 
        (analysis.byFlow[log.flow_name] || 0) + 1;
    }
    
    // Count by error code
    if (log.details.error_code) {
      analysis.byErrorCode[log.details.error_code] = 
        (analysis.byErrorCode[log.details.error_code] || 0) + 1;
    }
    
    // Count by hour
    const hour = new Date(log.timestamp).getHours();
    analysis.byHour[hour] = (analysis.byHour[hour] || 0) + 1;
  });
  
  // Find most common errors
  analysis.mostCommonErrors = Object.entries(analysis.byErrorCode)
    .sort(([,a], [,b]) => b - a)
    .slice(0, 5)
    .map(([code, count]) => ({ code, count, percentage: (count / logs.length * 100).toFixed(1) }));
  
  console.log('Error Analysis Report');
  console.log('====================');
  console.log(`Time period: ${hours} hours`);
  console.log(`Total errors: ${analysis.totalErrors}`);
  console.log('');
  
  console.log('Most Common Error Codes:');
  analysis.mostCommonErrors.forEach(error => {
    console.log(`  ${error.code}: ${error.count} (${error.percentage}%)`);
  });
  
  console.log('\nTop Error-Prone Actions:');
  Object.entries(analysis.byAction)
    .sort(([,a], [,b]) => b - a)
    .slice(0, 5)
    .forEach(([action, count]) => {
      console.log(`  ${action}: ${count} errors`);
    });
  
  return analysis;
}

// Usage
const errorReport = await analyzeErrorPatterns(apiKey, 24);
```

</CodeGroup>

## Error Responses

<CodeGroup>

```json 401 Unauthorized
{
  "error": {
    "code": "UNAUTHORIZED",
    "message": "Invalid or missing API key",
    "type": "authentication",
    "timestamp": "2024-01-15T10:30:00Z",
    "request_id": "req_123456789"
  }
}
```

```json 403 Forbidden
{
  "error": {
    "code": "FORBIDDEN",
    "message": "Insufficient permissions to view execution logs",
    "type": "authorization",
    "required_scopes": ["logs:read"],
    "timestamp": "2024-01-15T10:30:00Z",
    "request_id": "req_123456789"
  }
}
```

</CodeGroup>

## Log Levels

| Level | Description | Use Case |
|-------|-------------|----------|
| `debug` | Detailed debugging information | Development and troubleshooting |
| `info` | General informational messages | Normal operation tracking |
| `warn` | Warning conditions that should be noted | Performance issues, deprecated usage |
| `error` | Error conditions that prevented completion | Failed executions, exceptions |

## API Playground

Try listing execution logs:

<ApiPlayground
  method="GET"
  endpoint="/execution-logs"
  baseUrl="https://api.tolstoy.dev"
  auth={{
    type: "bearer",
    placeholder: "Your API Key"
  }}
  parameters={[
    {
      name: "limit",
      type: "integer",
      defaultValue: 50,
      description: "Number of logs per page (1-1000)"
    },
    {
      name: "execution_id",
      type: "string",
      placeholder: "exec_flow_789xyz123",
      description: "Filter by specific execution ID"
    },
    {
      name: "flow_id",
      type: "string",
      placeholder: "flow_abc123",
      description: "Filter by flow ID"
    },
    {
      name: "action_id",
      type: "string",
      placeholder: "act_abc123",
      description: "Filter by action ID"
    },
    {
      name: "level",
      type: "select",
      options: ["debug", "info", "warn", "error"],
      description: "Filter by log level"
    },
    {
      name: "search",
      type: "string",
      placeholder: "error message",
      description: "Search log messages"
    }
  ]}
  sampleResponse={{
    "logs": [
      {
        "id": "log_abc123xyz456",
        "execution_id": "exec_flow_789xyz123",
        "level": "info",
        "message": "Email sent successfully to john.doe@example.com",
        "timestamp": "2024-01-15T20:00:02.150Z",
        "flow_name": "Customer Onboarding Flow",
        "action_name": "Send Welcome Email",
        "metrics": {
          "duration_ms": 856
        }
      }
    ],
    "pagination": {
      "limit": 50,
      "count": 1,
      "has_more": false
    }
  }}
/>

## Related Endpoints

<CardGroup cols={2}>
  <Card title="Get Execution" icon="file" href="/api/executions/get">
    Get execution details
  </Card>
  <Card title="Download Logs" icon="download" href="/api/execution-logs/export">
    Export logs to file
  </Card>
  <Card title="Log Metrics" icon="chart-line" href="/api/execution-logs/metrics">
    Get aggregated log metrics
  </Card>
  <Card title="Real-time Logs" icon="tower-broadcast" href="/api/execution-logs/stream">
    Stream logs in real-time
  </Card>
</CardGroup>