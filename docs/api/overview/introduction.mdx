---
title: "API Introduction"
description: "Get started with the Tolstoy REST API - your gateway to powerful workflow automation and integration capabilities."
---

# API Introduction

The Tolstoy REST API provides programmatic access to all platform functionality, enabling you to build custom integrations, automate operations, and embed workflow capabilities into your applications.

## API Fundamentals

### Base URL

All API requests are made to the following base URL:

```
https://tolstoy.getpullse.com
```

For development and testing, you can also use:
```
http://localhost:3000
```

### API Version

The current API version is `v1`. All endpoints are prefixed with the base URL:

```
https://tolstoy.getpullse.com/flows
https://tolstoy.getpullse.com/actions
https://tolstoy.getpullse.com/tools
```

## Authentication

Tolstoy uses a dual-header authentication system that provides multi-tenant isolation and user context:

### Required Headers

<CodeGroup>
```bash cURL
curl -X GET https://tolstoy.getpullse.com/flows \
  -H "x-org-id: org_1234567890abcdef" \
  -H "x-user-id: user_abcdef1234567890" \
  -H "Content-Type: application/json"
```

```typescript TypeScript
const headers = {
  'x-org-id': 'org_1234567890abcdef',
  'x-user-id': 'user_abcdef1234567890',
  'Content-Type': 'application/json'
};
```

```python Python
headers = {
    'x-org-id': 'org_1234567890abcdef',
    'x-user-id': 'user_abcdef1234567890',
    'Content-Type': 'application/json'
}
```
</CodeGroup>

### Header Details

| Header | Description | Format | Required |
|--------|-------------|--------|----------|
| `x-org-id` | Your organization identifier | `org_` + 16 hex characters | Yes |
| `x-user-id` | Your user identifier | `user_` + 16 hex characters | Yes |
| `Content-Type` | Request content type | `application/json` | For POST/PUT/PATCH |

### Finding Your Credentials

1. **Dashboard Method**:
   - Log into the [Tolstoy Dashboard](https://app.tolstoy.dev)
   - Navigate to Settings â†’ API Credentials
   - Copy your Organization ID and User ID

2. **Profile Method**:
   - Click your avatar in the dashboard
   - Select "API Credentials" from the dropdown

<Warning>
**Security**: Never expose your credentials in client-side code or commit them to version control. Use environment variables or secure credential stores.
</Warning>

## Request Format

### Content Type

All requests that send data must include the `Content-Type: application/json` header and send data as JSON in the request body.

### HTTP Methods

The API follows RESTful conventions:

| Method | Usage | Description |
|--------|-------|-------------|
| `GET` | Read operations | Retrieve resources or lists |
| `POST` | Create operations | Create new resources |
| `PUT` | Update operations | Replace entire resources |
| `PATCH` | Partial updates | Update specific fields |
| `DELETE` | Delete operations | Remove resources |

### Request Body Example

```json
{
  "name": "My Workflow",
  "description": "Automates customer onboarding",
  "steps": [
    {
      "key": "send-welcome-email",
      "action": "email-send",
      "inputs": {
        "to": "{{customer.email}}",
        "subject": "Welcome to our platform!",
        "template": "welcome-template"
      }
    }
  ]
}
```

## Response Format

### Standard Response Structure

All API responses follow a consistent structure:

<CodeGroup>
```json Success Response
{
  "success": true,
  "data": {
    "id": "flow_abc123def456",
    "name": "My Workflow",
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T10:30:00Z"
  },
  "metadata": {
    "request_id": "req_xyz789",
    "timestamp": "2024-01-15T10:30:00Z"
  }
}
```

```json Error Response
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid workflow definition",
    "details": {
      "field": "steps",
      "reason": "At least one step is required"
    }
  },
  "metadata": {
    "request_id": "req_xyz789",
    "timestamp": "2024-01-15T10:30:00Z"
  }
}
```
</CodeGroup>

### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `success` | boolean | Indicates if the request was successful |
| `data` | object/array | Contains the requested data (success only) |
| `error` | object | Contains error information (error only) |
| `metadata` | object | Request metadata and debugging info |

## Status Codes

The API uses standard HTTP status codes:

### Success Codes

| Code | Meaning | Usage |
|------|---------|-------|
| `200` | OK | Successful GET, PUT, PATCH requests |
| `201` | Created | Successful POST requests |
| `202` | Accepted | Async operations started |
| `204` | No Content | Successful DELETE requests |

### Error Codes

| Code | Meaning | Common Causes |
|------|---------|---------------|
| `400` | Bad Request | Invalid request format or parameters |
| `401` | Unauthorized | Missing or invalid authentication |
| `403` | Forbidden | Insufficient permissions |
| `404` | Not Found | Resource doesn't exist |
| `409` | Conflict | Resource already exists or state conflict |
| `422` | Unprocessable Entity | Validation errors |
| `429` | Too Many Requests | Rate limit exceeded |
| `500` | Internal Server Error | Server-side error |
| `503` | Service Unavailable | Temporary service outage |

## Error Handling

### Error Response Structure

```json
{
  "success": false,
  "error": {
    "code": "RESOURCE_NOT_FOUND",
    "message": "The requested workflow was not found",
    "details": {
      "resource_type": "flow",
      "resource_id": "flow_nonexistent123"
    }
  },
  "metadata": {
    "request_id": "req_abc123",
    "timestamp": "2024-01-15T10:30:00Z"
  }
}
```

### Common Error Codes

| Error Code | HTTP Status | Description |
|------------|-------------|-------------|
| `VALIDATION_ERROR` | 422 | Request validation failed |
| `RESOURCE_NOT_FOUND` | 404 | Requested resource doesn't exist |
| `UNAUTHORIZED` | 401 | Authentication required |
| `FORBIDDEN` | 403 | Permission denied |
| `RATE_LIMITED` | 429 | Too many requests |
| `INTERNAL_ERROR` | 500 | Server-side error |

### Best Practices for Error Handling

<CodeGroup>
```typescript TypeScript
async function createWorkflow(workflowData: WorkflowData) {
  try {
    const response = await fetch('/flows', {
      method: 'POST',
      headers: {
        'x-org-id': process.env.TOLSTOY_ORG_ID!,
        'x-user-id': process.env.TOLSTOY_USER_ID!,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(workflowData)
    });

    const result = await response.json();
    
    if (!result.success) {
      throw new Error(`API Error: ${result.error.message}`);
    }
    
    return result.data;
  } catch (error) {
    console.error('Failed to create workflow:', error);
    throw error;
  }
}
```

```python Python
import requests
import os

def create_workflow(workflow_data):
    headers = {
        'x-org-id': os.environ['TOLSTOY_ORG_ID'],
        'x-user-id': os.environ['TOLSTOY_USER_ID'],
        'Content-Type': 'application/json'
    }
    
    try:
        response = requests.post(
            'https://tolstoy.getpullse.com/flows',
            headers=headers,
            json=workflow_data,
            timeout=30
        )
        response.raise_for_status()
        
        result = response.json()
        if not result.get('success'):
            raise Exception(f"API Error: {result['error']['message']}")
            
        return result['data']
    except requests.RequestException as e:
        print(f"Failed to create workflow: {e}")
        raise
```
</CodeGroup>

## Pagination

List endpoints support pagination using cursor-based pagination:

### Pagination Parameters

| Parameter | Type | Description | Default |
|-----------|------|-------------|---------|
| `limit` | integer | Number of items per page (max 100) | 20 |
| `cursor` | string | Cursor for next page | null |

### Pagination Example

<CodeGroup>
```bash Request
curl -X GET "https://tolstoy.getpullse.com/flows?limit=10" \
  -H "x-org-id: org_1234567890abcdef" \
  -H "x-user-id: user_abcdef1234567890"
```

```json Response
{
  "success": true,
  "data": [
    {
      "id": "flow_abc123",
      "name": "Workflow 1"
    },
    {
      "id": "flow_def456", 
      "name": "Workflow 2"
    }
  ],
  "pagination": {
    "limit": 10,
    "cursor": "eyJpZCI6ImZsb3dfZGVmNDU2In0",
    "has_more": true
  }
}
```
</CodeGroup>

### Next Page Request

```bash
curl -X GET "https://tolstoy.getpullse.com/flows?limit=10&cursor=eyJpZCI6ImZsb3dfZGVmNDU2In0" \
  -H "x-org-id: org_1234567890abcdef" \
  -H "x-user-id: user_abcdef1234567890"
```

## Rate Limiting

To ensure fair usage and system stability, the API implements rate limiting:

### Rate Limit Headers

All responses include rate limit information:

```http
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1642262400
X-RateLimit-Window: 3600
```

### Rate Limit Details

| Endpoint Type | Requests per Hour | Burst Limit |
|---------------|-------------------|-------------|
| Read operations (GET) | 2000 | 100 per minute |
| Write operations (POST/PUT/PATCH) | 1000 | 50 per minute |
| Delete operations | 500 | 25 per minute |
| Execution operations | 500 | 25 per minute |

### Handling Rate Limits

When you exceed rate limits, the API returns a `429 Too Many Requests` status:

```json
{
  "success": false,
  "error": {
    "code": "RATE_LIMITED",
    "message": "Rate limit exceeded. Please try again later.",
    "details": {
      "retry_after": 60
    }
  }
}
```

**Best Practices:**
- Implement exponential backoff when you hit rate limits
- Cache responses when appropriate to reduce API calls
- Use webhooks instead of polling for real-time updates
- Batch operations when possible

## Webhooks

For real-time updates, Tolstoy supports webhooks instead of polling:

### Webhook Events

| Event | Triggered When |
|-------|----------------|
| `flow.execution.started` | Workflow execution begins |
| `flow.execution.completed` | Workflow execution finishes |
| `flow.execution.failed` | Workflow execution fails |
| `action.executed` | Individual action completes |

### Setting Up Webhooks

```json
{
  "url": "https://your-app.com/webhooks/tolstoy",
  "events": [
    "flow.execution.completed",
    "flow.execution.failed"
  ],
  "secret": "your-webhook-secret"
}
```

## SDKs and Tools

### Official SDKs

<CardGroup cols={2}>
  <Card title="TypeScript/Node.js" icon="js" href="/sdk/getting-started/installation">
    Full-featured SDK with TypeScript support
  </Card>
  <Card title="Python" icon="python" href="/sdk/getting-started/installation">
    Pythonic interface for the Tolstoy API
  </Card>
</CardGroup>

### CLI Tool

<Card title="Tolstoy CLI" icon="terminal" href="/cli/getting-started/installation">
Command-line interface for workflow management and automation
</Card>

### Third-Party Tools

- **Postman Collection**: Import our complete API collection
- **OpenAPI Spec**: Use our OpenAPI specification for code generation
- **Insomnia**: Import our workspace for API testing

## Getting Started

Ready to start building with the API?

<CardGroup cols={2}>
  <Card title="Authentication Guide" icon="key" href="/api/overview/authentication">
    Set up authentication and get your first API response
  </Card>
  <Card title="Quick Start Guide" icon="rocket" href="/api/guides/making-requests">
    Make your first API request and create a workflow
  </Card>
</CardGroup>

<CardGroup cols={2}>
  <Card title="API Reference" icon="book" href="/api/resources/flows/list-flows">
    Browse complete endpoint documentation
  </Card>
  <Card title="Postman Collection" icon="download" href="/api/guides/postman-collection">
    Download and import our Postman collection
  </Card>
</CardGroup>

---

*The Tolstoy API gives you the power to integrate workflow automation into any application or system. Start with authentication and explore the possibilities.*