---
title: "Create Action"
description: "Create a new action in your organization"
---

# Create Action

<Badge variant="warning">POST</Badge> `/actions`

Create a new action in your organization. Actions are reusable workflow components that can be executed independently or combined into flows.

## Request

### **HTTP Request**

```http
POST https://api.tolstoy.dev/actions
```

### **Request Body**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | string | Yes | Unique action identifier (alphanumeric, underscore) |
| `display_name` | string | Yes | Human-readable action name |
| `description` | string | No | Detailed action description |
| `type` | string | Yes | Action type (`http`, `database`, `script`, `integration`) |
| `category` | string | No | Action category for organization |
| `tags` | array | No | Tags for filtering and organization |
| `configuration` | object | Yes | Action configuration including inputs and outputs |
| `permissions` | object | No | Required permissions and rate limits |
| `status` | string | No | Initial status (`draft` or `active`), defaults to `draft` |

### **Configuration Object**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `inputs` | array | Yes | Input parameter definitions |
| `outputs` | array | No | Output parameter definitions |
| `timeout` | integer | No | Execution timeout in milliseconds (default: 30000) |
| `retry_policy` | object | No | Retry configuration for failures |
| `script` | string | Conditional | Script code (required for `script` type) |
| `endpoint` | object | Conditional | HTTP endpoint config (required for `http` type) |
| `connection_id` | string | Conditional | Database connection ID (required for `database` type) |

## Response

### **Success Response**

<CodeGroup>

```json 201 Created
{
  "action": {
    "id": "act_new123abc456",
    "name": "process_payment",
    "display_name": "Process Payment",
    "description": "Process payment through Stripe API",
    "type": "integration",
    "status": "draft",
    "version": "1.0.0",
    "category": "payments",
    "tags": ["stripe", "payments", "billing"],
    "configuration": {
      "inputs": [
        {
          "name": "amount",
          "type": "number",
          "required": true,
          "description": "Payment amount in cents",
          "validation": {
            "min": 50,
            "max": 999999
          }
        },
        {
          "name": "currency",
          "type": "string",
          "required": true,
          "description": "Three-letter ISO currency code",
          "default": "USD",
          "validation": {
            "enum": ["USD", "EUR", "GBP"]
          }
        },
        {
          "name": "customer_id",
          "type": "string",
          "required": true,
          "description": "Stripe customer ID"
        },
        {
          "name": "metadata",
          "type": "object",
          "required": false,
          "description": "Additional metadata"
        }
      ],
      "outputs": [
        {
          "name": "payment_id",
          "type": "string",
          "description": "Stripe payment intent ID"
        },
        {
          "name": "status",
          "type": "string",
          "description": "Payment status"
        },
        {
          "name": "receipt_url",
          "type": "string",
          "description": "Payment receipt URL"
        }
      ],
      "timeout": 45000,
      "retry_policy": {
        "max_retries": 3,
        "backoff_multiplier": 2,
        "retryable_errors": ["TIMEOUT", "RATE_LIMIT"]
      }
    },
    "permissions": {
      "scopes": ["payments:write", "customers:read"],
      "rate_limit": {
        "requests_per_minute": 100,
        "burst_limit": 20
      }
    },
    "created_by": "user_current123",
    "created_at": "2024-01-15T20:00:00Z",
    "updated_at": "2024-01-15T20:00:00Z"
  }
}
```

</CodeGroup>

## Examples

### **Create HTTP Action**

<CodeGroup>

```bash cURL
curl -X POST 'https://api.tolstoy.dev/actions' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "name": "webhook_notification",
    "display_name": "Send Webhook Notification",
    "description": "Send notification to external webhook",
    "type": "http",
    "configuration": {
      "endpoint": {
        "url": "https://hooks.example.com/notify",
        "method": "POST",
        "headers": {
          "Content-Type": "application/json"
        }
      },
      "inputs": [
        {
          "name": "event_type",
          "type": "string",
          "required": true
        },
        {
          "name": "payload",
          "type": "object",
          "required": true
        }
      ],
      "outputs": [
        {
          "name": "response",
          "type": "object"
        },
        {
          "name": "status_code",
          "type": "integer"
        }
      ],
      "timeout": 30000
    }
  }'
```

```javascript JavaScript
const newAction = {
  name: "webhook_notification",
  display_name: "Send Webhook Notification",
  description: "Send notification to external webhook",
  type: "http",
  configuration: {
    endpoint: {
      url: "https://hooks.example.com/notify",
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      }
    },
    inputs: [
      {
        name: "event_type",
        type: "string",
        required: true,
        description: "Type of event"
      },
      {
        name: "payload",
        type: "object",
        required: true,
        description: "Event payload"
      }
    ],
    outputs: [
      {
        name: "response",
        type: "object",
        description: "Webhook response"
      },
      {
        name: "status_code",
        type: "integer",
        description: "HTTP status code"
      }
    ],
    timeout: 30000
  }
};

const response = await fetch('https://api.tolstoy.dev/actions', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(newAction)
});

const data = await response.json();
console.log('Created action:', data.action.id);
```

</CodeGroup>

### **Create Script Action**

<CodeGroup>

```javascript JavaScript Script Action
const scriptAction = {
  name: "calculate_metrics",
  display_name: "Calculate Metrics",
  description: "Calculate custom business metrics",
  type: "script",
  configuration: {
    script: `
      // JavaScript code to execute
      const { data, threshold } = inputs;
      
      const metrics = {
        total: data.reduce((sum, item) => sum + item.value, 0),
        average: data.reduce((sum, item) => sum + item.value, 0) / data.length,
        count: data.length,
        aboveThreshold: data.filter(item => item.value > threshold).length
      };
      
      return {
        metrics,
        timestamp: new Date().toISOString()
      };
    `,
    inputs: [
      {
        name: "data",
        type: "array",
        required: true,
        description: "Array of data points"
      },
      {
        name: "threshold",
        type: "number",
        required: true,
        description: "Threshold value"
      }
    ],
    outputs: [
      {
        name: "metrics",
        type: "object",
        description: "Calculated metrics"
      },
      {
        name: "timestamp",
        type: "string",
        description: "Calculation timestamp"
      }
    ],
    timeout: 10000
  },
  tags: ["analytics", "metrics"]
};

const response = await fetch('https://api.tolstoy.dev/actions', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(scriptAction)
});
```

</CodeGroup>

### **Create Database Action**

<CodeGroup>

```python Python Database Action
import requests

database_action = {
    "name": "get_user_orders",
    "display_name": "Get User Orders",
    "description": "Retrieve orders for a specific user",
    "type": "database",
    "configuration": {
        "connection_id": "conn_postgres_main",
        "query": """
            SELECT 
                o.id,
                o.order_date,
                o.total_amount,
                o.status,
                COUNT(oi.id) as item_count
            FROM orders o
            LEFT JOIN order_items oi ON o.id = oi.order_id
            WHERE o.user_id = :user_id
                AND o.created_at >= :start_date
            GROUP BY o.id
            ORDER BY o.order_date DESC
            LIMIT :limit
        """,
        "inputs": [
            {
                "name": "user_id",
                "type": "string",
                "required": True,
                "description": "User ID"
            },
            {
                "name": "start_date",
                "type": "string",
                "required": True,
                "description": "Start date (ISO 8601)"
            },
            {
                "name": "limit",
                "type": "integer",
                "required": False,
                "default": 100,
                "validation": {
                    "min": 1,
                    "max": 1000
                }
            }
        ],
        "outputs": [
            {
                "name": "orders",
                "type": "array",
                "description": "List of user orders"
            },
            {
                "name": "row_count",
                "type": "integer",
                "description": "Number of orders returned"
            }
        ],
        "timeout": 30000
    },
    "category": "data",
    "tags": ["orders", "database", "postgresql"]
}

response = requests.post(
    'https://api.tolstoy.dev/actions',
    headers={
        'Authorization': f'Bearer {api_key}',
        'Content-Type': 'application/json'
    },
    json=database_action
)

if response.status_code == 201:
    action = response.json()['action']
    print(f"Created action: {action['id']}")
```

</CodeGroup>

## Input Validation

### **Validation Rules**

| Type | Validation Options | Description |
|------|-------------------|-------------|
| `string` | `pattern`, `min_length`, `max_length`, `enum` | String validation |
| `number` | `min`, `max`, `multipleOf` | Numeric validation |
| `integer` | `min`, `max`, `multipleOf` | Integer validation |
| `boolean` | - | No additional validation |
| `array` | `min_items`, `max_items`, `unique_items` | Array validation |
| `object` | `required_properties`, `additional_properties` | Object validation |

### **Validation Example**

```json
{
  "inputs": [
    {
      "name": "email",
      "type": "string",
      "required": true,
      "validation": {
        "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",
        "max_length": 255
      }
    },
    {
      "name": "age",
      "type": "integer",
      "required": true,
      "validation": {
        "min": 18,
        "max": 120
      }
    },
    {
      "name": "tags",
      "type": "array",
      "required": false,
      "validation": {
        "min_items": 1,
        "max_items": 10,
        "unique_items": true
      }
    }
  ]
}
```

## Error Responses

<CodeGroup>

```json 400 Bad Request
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid action configuration",
    "type": "validation",
    "details": [
      {
        "field": "name",
        "issue": "Action name already exists"
      },
      {
        "field": "configuration.inputs[0].type",
        "issue": "Invalid input type: 'invalid'"
      }
    ],
    "timestamp": "2024-01-15T10:30:00Z",
    "request_id": "req_123456789"
  }
}
```

```json 403 Forbidden
{
  "error": {
    "code": "FORBIDDEN",
    "message": "Insufficient permissions to create actions",
    "type": "authorization",
    "required_scopes": ["actions:write"],
    "timestamp": "2024-01-15T10:30:00Z",
    "request_id": "req_123456789"
  }
}
```

</CodeGroup>

## API Playground

Try creating an action directly:

<ApiPlayground
  method="POST"
  endpoint="/actions"
  baseUrl="https://api.tolstoy.dev"
  auth={{
    type: "bearer",
    placeholder: "Your API Key"
  }}
  body={{
    type: "json",
    schema: {
      name: {
        type: "string",
        placeholder: "webhook_notification",
        description: "Unique action identifier",
        required: true
      },
      display_name: {
        type: "string",
        placeholder: "Send Webhook Notification",
        description: "Human-readable action name",
        required: true
      },
      description: {
        type: "string",
        placeholder: "Send notification to external webhook",
        description: "Detailed action description"
      },
      type: {
        type: "select",
        options: ["http", "database", "script", "integration"],
        defaultValue: "http",
        description: "Action type",
        required: true
      },
      category: {
        type: "string",
        placeholder: "communication",
        description: "Action category"
      },
      tags: {
        type: "array",
        placeholder: ["webhooks", "notifications"],
        description: "Tags for organization"
      },
      configuration: {
        type: "object",
        defaultValue: {
          inputs: [
            {
              name: "message",
              type: "string",
              required: true,
              description: "Message to send"
            }
          ],
          timeout: 30000
        },
        description: "Action configuration"
      }
    }
  }}
  sampleResponse={{
    "action": {
      "id": "act_new123abc456",
      "name": "webhook_notification",
      "display_name": "Send Webhook Notification",
      "type": "http",
      "status": "draft",
      "version": "1.0.0",
      "created_at": "2024-01-15T20:00:00Z"
    }
  }}
/>

## Related Endpoints

<CardGroup cols={2}>
  <Card title="List Actions" icon="list" href="/api/actions/list">
    List all actions in your organization
  </Card>
  <Card title="Update Action" icon="pencil" href="/api/actions/update">
    Update an existing action
  </Card>
  <Card title="Test Action" icon="vial" href="/api/actions/test">
    Test action configuration
  </Card>
  <Card title="Deploy Action" icon="rocket" href="/api/actions/deploy">
    Deploy action from draft to active
  </Card>
</CardGroup>