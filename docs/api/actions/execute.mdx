---
title: "Execute Action"
description: "Execute an action with provided inputs"
---

# Execute Action

<Badge variant="warning">POST</Badge> `/actions/{action_id}/execute`

Execute a specific action with the provided input parameters. Returns the execution result and outputs.

## Request

### **HTTP Request**

```http
POST https://api.tolstoy.dev/actions/{action_id}/execute
```

### **Path Parameters**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `action_id` | string | Yes | The unique identifier of the action to execute |

### **Request Body**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `inputs` | object | Yes | Input parameters as defined by the action |
| `async` | boolean | No | Execute asynchronously (default: false) |
| `timeout_override` | integer | No | Override default timeout (milliseconds) |
| `trace_id` | string | No | Custom trace ID for debugging |
| `context` | object | No | Additional execution context |

## Response

### **Synchronous Execution Response**

<CodeGroup>

```json 200 OK
{
  "execution": {
    "id": "exec_789xyz123abc",
    "action_id": "act_abc123xyz456",
    "status": "success",
    "started_at": "2024-01-15T20:00:00.000Z",
    "completed_at": "2024-01-15T20:00:01.250Z",
    "duration_ms": 1250,
    "inputs": {
      "to": ["user@example.com"],
      "subject": "Order Confirmation",
      "body": "<h1>Your order has been confirmed</h1><p>Order #12345</p>",
      "cc": ["manager@example.com"]
    },
    "outputs": {
      "message_id": "msg_987654321",
      "status": "sent",
      "sent_at": "2024-01-15T20:00:01.200Z",
      "provider_response": {
        "id": "sendgrid_msg_abc123",
        "accepted": 2,
        "rejected": 0
      }
    },
    "metadata": {
      "trace_id": "trace_custom_123",
      "version": "2.1.0",
      "retry_count": 0,
      "execution_environment": "production"
    }
  }
}
```

</CodeGroup>

### **Asynchronous Execution Response**

<CodeGroup>

```json 202 Accepted
{
  "execution": {
    "id": "exec_async_456def",
    "action_id": "act_abc123xyz456",
    "status": "pending",
    "created_at": "2024-01-15T20:00:00.000Z",
    "estimated_duration_ms": 5000,
    "polling_url": "https://api.tolstoy.dev/executions/exec_async_456def",
    "webhook_url": "https://api.tolstoy.dev/webhooks/exec_async_456def"
  }
}
```

</CodeGroup>

## Examples

### **Basic Execution**

<CodeGroup>

```bash cURL
curl -X POST 'https://api.tolstoy.dev/actions/act_abc123xyz456/execute' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "inputs": {
      "to": ["customer@example.com"],
      "subject": "Welcome to Tolstoy",
      "body": "<h1>Welcome!</h1><p>Thank you for signing up.</p>"
    }
  }'
```

```javascript JavaScript
const actionId = 'act_abc123xyz456';

const executionRequest = {
  inputs: {
    to: ["customer@example.com"],
    subject: "Welcome to Tolstoy",
    body: "<h1>Welcome!</h1><p>Thank you for signing up.</p>",
    cc: ["team@example.com"]
  },
  context: {
    user_id: "user_123",
    request_source: "signup_flow"
  }
};

const response = await fetch(
  `https://api.tolstoy.dev/actions/${actionId}/execute`,
  {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${apiKey}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(executionRequest)
  }
);

const result = await response.json();
console.log('Execution status:', result.execution.status);
console.log('Outputs:', result.execution.outputs);
```

```python Python
import requests

action_id = 'act_abc123xyz456'

execution_request = {
    "inputs": {
        "channel": "#alerts",
        "message": "Deployment completed successfully",
        "priority": "high",
        "attachments": [
            {
                "title": "Deployment Details",
                "fields": [
                    {"name": "Version", "value": "v2.1.0"},
                    {"name": "Environment", "value": "Production"},
                    {"name": "Duration", "value": "3m 42s"}
                ]
            }
        ]
    }
}

response = requests.post(
    f'https://api.tolstoy.dev/actions/{action_id}/execute',
    headers={
        'Authorization': f'Bearer {api_key}',
        'Content-Type': 'application/json'
    },
    json=execution_request
)

if response.status_code == 200:
    result = response.json()
    print(f"Execution ID: {result['execution']['id']}")
    print(f"Status: {result['execution']['status']}")
    print(f"Duration: {result['execution']['duration_ms']}ms")
```

</CodeGroup>

### **Asynchronous Execution**

<CodeGroup>

```javascript Async Execution with Polling
async function executeActionAsync(actionId, inputs, apiKey) {
  // Start async execution
  const executeResponse = await fetch(
    `https://api.tolstoy.dev/actions/${actionId}/execute`,
    {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${apiKey}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        inputs,
        async: true
      })
    }
  );
  
  const execution = await executeResponse.json();
  console.log(`Started execution: ${execution.execution.id}`);
  
  // Poll for completion
  let result;
  let attempts = 0;
  const maxAttempts = 60; // 5 minutes with 5-second intervals
  
  while (attempts < maxAttempts) {
    await new Promise(resolve => setTimeout(resolve, 5000)); // Wait 5 seconds
    
    const statusResponse = await fetch(
      execution.execution.polling_url,
      {
        headers: {
          'Authorization': `Bearer ${apiKey}`,
          'Content-Type': 'application/json'
        }
      }
    );
    
    result = await statusResponse.json();
    
    if (result.execution.status !== 'pending' && 
        result.execution.status !== 'running') {
      break;
    }
    
    attempts++;
    console.log(`Status: ${result.execution.status} (attempt ${attempts})`);
  }
  
  return result;
}

// Usage
const result = await executeActionAsync(
  'act_long_running',
  { data_source: 'production', report_type: 'monthly' },
  apiKey
);

console.log('Final status:', result.execution.status);
console.log('Outputs:', result.execution.outputs);
```

</CodeGroup>

### **Execution with Timeout Override**

<CodeGroup>

```javascript Custom Timeout
const actionId = 'act_slow_process';

const response = await fetch(
  `https://api.tolstoy.dev/actions/${actionId}/execute`,
  {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${apiKey}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      inputs: {
        query: "SELECT * FROM large_table",
        limit: 10000
      },
      timeout_override: 120000, // 2 minutes instead of default
      trace_id: "custom_trace_123"
    })
  }
);
```

</CodeGroup>

### **Batch Execution**

<CodeGroup>

```javascript Execute Multiple Actions
async function batchExecuteActions(actions, apiKey) {
  const executions = await Promise.all(
    actions.map(async ({ actionId, inputs }) => {
      try {
        const response = await fetch(
          `https://api.tolstoy.dev/actions/${actionId}/execute`,
          {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${apiKey}`,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ inputs })
          }
        );
        
        const result = await response.json();
        return {
          actionId,
          success: true,
          execution: result.execution
        };
      } catch (error) {
        return {
          actionId,
          success: false,
          error: error.message
        };
      }
    })
  );
  
  const successful = executions.filter(e => e.success);
  const failed = executions.filter(e => !e.success);
  
  console.log(`Successful: ${successful.length}, Failed: ${failed.length}`);
  return executions;
}

// Usage
const actions = [
  {
    actionId: 'act_send_email',
    inputs: { to: ['user1@example.com'], subject: 'Update 1' }
  },
  {
    actionId: 'act_send_slack',
    inputs: { channel: '#updates', message: 'Process complete' }
  },
  {
    actionId: 'act_update_database',
    inputs: { table: 'logs', status: 'completed' }
  }
];

const results = await batchExecuteActions(actions, apiKey);
```

</CodeGroup>

## Error Responses

<CodeGroup>

```json 400 Bad Request
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid input parameters",
    "type": "validation",
    "details": [
      {
        "field": "inputs.to",
        "issue": "Required field missing"
      },
      {
        "field": "inputs.priority",
        "issue": "Invalid value 'urgent' - must be one of: low, medium, high, critical"
      }
    ],
    "timestamp": "2024-01-15T10:30:00Z",
    "request_id": "req_123456789"
  }
}
```

```json 422 Execution Failed
{
  "execution": {
    "id": "exec_failed_789",
    "action_id": "act_abc123xyz456",
    "status": "failed",
    "started_at": "2024-01-15T20:00:00.000Z",
    "failed_at": "2024-01-15T20:00:02.500Z",
    "duration_ms": 2500,
    "error": {
      "code": "PROVIDER_ERROR",
      "message": "Failed to connect to email provider",
      "details": {
        "provider": "sendgrid",
        "error_code": "CONNECTION_TIMEOUT",
        "retry_possible": true
      }
    },
    "inputs": {
      "to": ["user@example.com"],
      "subject": "Test Email"
    }
  }
}
```

```json 429 Rate Limited
{
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "Action execution rate limit exceeded",
    "type": "rate_limit",
    "details": {
      "limit": 100,
      "window": "minute",
      "retry_after": 45
    },
    "timestamp": "2024-01-15T10:30:00Z",
    "request_id": "req_123456789"
  }
}
```

</CodeGroup>

## Execution States

| Status | Description |
|--------|-------------|
| `pending` | Execution queued but not started |
| `running` | Execution in progress |
| `success` | Execution completed successfully |
| `failed` | Execution failed with error |
| `timeout` | Execution exceeded timeout limit |
| `cancelled` | Execution was cancelled |
| `retrying` | Execution is being retried |

## API Playground

Try executing an action:

<ApiPlayground
  method="POST"
  endpoint="/actions/{action_id}/execute"
  baseUrl="https://api.tolstoy.dev"
  auth={{
    type: "bearer",
    placeholder: "Your API Key"
  }}
  pathParams={[
    {
      name: "action_id",
      placeholder: "act_abc123xyz456",
      description: "The unique identifier of the action to execute",
      required: true
    }
  ]}
  body={{
    type: "json",
    schema: {
      inputs: {
        type: "object",
        defaultValue: {
          to: ["customer@example.com"],
          subject: "Welcome to Tolstoy",
          body: "<h1>Welcome!</h1><p>Thank you for signing up.</p>"
        },
        description: "Input parameters for the action",
        required: true
      },
      async: {
        type: "boolean",
        defaultValue: false,
        description: "Execute asynchronously"
      },
      timeout_override: {
        type: "integer",
        placeholder: 30000,
        description: "Override default timeout (milliseconds)"
      },
      trace_id: {
        type: "string",
        placeholder: "trace_custom_123",
        description: "Custom trace ID for debugging"
      }
    }
  }}
  sampleResponse={{
    "execution": {
      "id": "exec_789xyz123abc",
      "action_id": "act_abc123xyz456",
      "status": "success",
      "duration_ms": 1250,
      "outputs": {
        "message_id": "msg_987654321",
        "status": "sent",
        "sent_at": "2024-01-15T20:00:01.200Z"
      }
    }
  }}
/>

## Related Endpoints

<CardGroup cols={2}>
  <Card title="Get Execution" icon="file" href="/api/executions/get">
    Retrieve execution details
  </Card>
  <Card title="Cancel Execution" icon="stop" href="/api/executions/cancel">
    Cancel a running execution
  </Card>
  <Card title="Execution Logs" icon="scroll" href="/api/execution-logs/list">
    View execution logs
  </Card>
  <Card title="Test Action" icon="vial" href="/api/actions/test">
    Test action without executing
  </Card>
</CardGroup>