---
title: TolstoyClient
sidebar_position: 1
---

# TolstoyClient Constructor

The main SDK class providing access to all Tolstoy API endpoints.

## Constructor

```typescript
new TolstoyClient(
  baseUrl: string,
  orgId?: string,
  userId?: string,
  token?: string
)
```

## Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `baseUrl` | `string` | ✅ | Base URL of the Tolstoy API |
| `orgId` | `string` | ⚠️ | Organization ID (recommended) |
| `userId` | `string` | ⚠️ | User ID for request context (recommended) |
| `token` | `string` | ❌ | Optional Bearer token |

## Usage Examples

### Basic Setup
```typescript
import { TolstoyClient } from '@joosuhail/tolstoy-sdk';

const client = new TolstoyClient(
  'https://tolstoy.getpullse.com',
  'org_abc123',
  'user_def456'
);
```

### Production Setup
```typescript
const client = new TolstoyClient(
  process.env.TOLSTOY_BASE_URL || 'https://tolstoy.getpullse.com',
  process.env.TOLSTOY_ORG_ID,
  process.env.TOLSTOY_USER_ID,
  process.env.TOLSTOY_BEARER_TOKEN // Optional
);
```

### Development Setup
```typescript
const client = new TolstoyClient(
  'http://localhost:3000', // Development server
  'org_dev_123',
  'user_dev_456'
);
```

## Authentication

The client supports two authentication methods:

### 1. Multi-tenant Headers (Recommended)
```typescript
const client = new TolstoyClient(
  'https://tolstoy.getpullse.com',
  'your-org-id',     // Automatically adds x-org-id header
  'your-user-id'     // Automatically adds x-user-id header
);
```

### 2. Bearer Token
```typescript
const client = new TolstoyClient(
  'https://tolstoy.getpullse.com',
  undefined,
  undefined,
  'your-bearer-token' // Adds Authorization: Bearer header
);
```

## Properties

### client.raw
Access to all generated API endpoints for advanced usage.

```typescript
client.raw: Api<unknown>
```

**Example:**
```typescript
// Direct API access
const health = await client.raw.health.healthControllerGetStatus();
const flows = await client.raw.flows.flowsControllerFindAll();
```

## Error Handling

```typescript
try {
  const client = new TolstoyClient(
    'https://tolstoy.getpullse.com',
    'org_123',
    'user_456'
  );
  
  // Test connection
  const health = await client.raw.health.healthControllerGetStatus();
  console.log('Client initialized successfully');
} catch (error) {
  console.error('Failed to initialize client:', error.message);
}
```

## Best Practices

### Environment Configuration
```typescript
// .env file
TOLSTOY_BASE_URL=https://tolstoy.getpullse.com
TOLSTOY_ORG_ID=org_abc123
TOLSTOY_USER_ID=user_def456

// Client setup
const client = new TolstoyClient(
  process.env.TOLSTOY_BASE_URL!,
  process.env.TOLSTOY_ORG_ID!,
  process.env.TOLSTOY_USER_ID!
);
```

### Singleton Pattern
```typescript
// client.ts
let tolstoyClient: TolstoyClient;

export function getTolstoyClient(): TolstoyClient {
  if (!tolstoyClient) {
    tolstoyClient = new TolstoyClient(
      process.env.TOLSTOY_BASE_URL!,
      process.env.TOLSTOY_ORG_ID!,
      process.env.TOLSTOY_USER_ID!
    );
  }
  return tolstoyClient;
}

// Usage
import { getTolstoyClient } from './client';
const client = getTolstoyClient();
```

### Connection Testing
```typescript
async function testConnection(client: TolstoyClient): Promise<boolean> {
  try {
    const health = await client.raw.health.healthControllerGetStatus();
    return health.data.status === 'ok';
  } catch (error) {
    console.error('Connection test failed:', error);
    return false;
  }
}

const client = new TolstoyClient(baseUrl, orgId, userId);
const isConnected = await testConnection(client);
```

## Related Methods

- [runFlow()](/sdk/methods/run-flow) - Execute workflows
- [listFlows()](/sdk/methods/list-flows) - List all workflows
- [createTool()](/sdk/methods/create-tool) - Create tool integrations
- [createWebhook()](/sdk/methods/create-webhook) - Set up webhooks