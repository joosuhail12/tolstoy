---
title: Tools
sidebar_position: 6
---

# Tools

Manage external API integrations and tools within your Tolstoy workflow automation platform. Tools provide the connection points for your workflows to interact with third-party services and APIs.

## Overview

Tool management enables you to:
- **Connect to external APIs** with authentication and configuration management
- **Manage API credentials** securely with encrypted storage
- **Configure rate limiting** and retry policies for external services
- **Monitor tool usage** and performance metrics across workflows
- **Implement custom integrations** with flexible configuration options

## Tool Methods

### Discovery & Management
- **[listTools()](list-tools)** - List all configured tools with usage statistics and health status
- **[createTool()](create-tool)** - Create new tool integrations with authentication and configuration

## Quick Examples

### List Available Tools
```typescript
const tools = await client.listTools();

tools.data.forEach(tool => {
  console.log(`${tool.name} (${tool.type})`);
  console.log(`Status: ${tool.status}`);
  console.log(`Usage: ${tool.metrics.totalCalls} calls`);
});
```

### Create API Integration
```typescript
const slackTool = await client.createTool({
  name: 'Slack Notifications',
  type: 'slack',
  description: 'Send messages to Slack channels',
  config: {
    webhookUrl: 'https://hooks.slack.com/services/...',
    defaultChannel: '#general'
  },
  authentication: {
    type: 'bearer',
    token: 'xoxb-your-bot-token'
  }
});

console.log(`Created tool: ${slackTool.data.name}`);
```

### Database Connection Tool
```typescript
const dbTool = await client.createTool({
  name: 'Production Database',
  type: 'postgresql',
  config: {
    host: 'prod-db.company.com',
    port: 5432,
    database: 'analytics',
    ssl: true,
    maxConnections: 10
  },
  authentication: {
    type: 'credentials',
    username: 'readonly_user',
    password: '{{secret:db-password}}'
  }
});
```

## Common Use Cases

### CRM Integration
Connect to Salesforce, HubSpot, or other CRM systems:

```typescript
async function setupCRMIntegration() {
  const salesforceTool = await client.createTool({
    name: 'Salesforce CRM',
    type: 'salesforce',
    description: 'Create and update CRM records',
    config: {
      instanceUrl: 'https://company.salesforce.com',
      apiVersion: 'v58.0',
      sandbox: false
    },
    authentication: {
      type: 'oauth2',
      clientId: '{{secret:sf-client-id}}',
      clientSecret: '{{secret:sf-client-secret}}',
      refreshToken: '{{secret:sf-refresh-token}}'
    },
    rateLimits: {
      requestsPerSecond: 10,
      burstLimit: 50
    }
  });
  
  return salesforceTool;
}
```

### Email Service Integration
Set up email sending capabilities:

```typescript
async function setupEmailService() {
  const emailTool = await client.createTool({
    name: 'SendGrid Email Service',
    type: 'sendgrid',
    config: {
      defaultFrom: 'noreply@company.com',
      trackOpens: true,
      trackClicks: true,
      templates: {
        welcome: 'd-abc123',
        reset: 'd-def456'
      }
    },
    authentication: {
      type: 'api_key',
      apiKey: '{{secret:sendgrid-api-key}}'
    }
  });
  
  return emailTool;
}
```

### Cloud Storage Integration
Connect to cloud storage services:

```typescript
async function setupCloudStorage() {
  const s3Tool = await client.createTool({
    name: 'AWS S3 Storage',
    type: 'aws-s3',
    config: {
      region: 'us-east-1',
      bucket: 'company-workflows',
      encryption: 'AES256'
    },
    authentication: {
      type: 'aws-credentials',
      accessKeyId: '{{secret:aws-access-key}}',
      secretAccessKey: '{{secret:aws-secret-key}}'
    }
  });
  
  return s3Tool;
}
```

## Integration Patterns

### HTTP API Tool
Generic HTTP client for custom APIs:

```typescript
async function createHTTPTool(name: string, baseUrl: string, auth: any) {
  return await client.createTool({
    name,
    type: 'http',
    description: `HTTP client for ${name}`,
    config: {
      baseUrl,
      timeout: 30000,
      retries: 3,
      headers: {
        'User-Agent': 'Tolstoy-Workflow/1.0',
        'Accept': 'application/json'
      }
    },
    authentication: auth,
    healthCheck: {
      endpoint: '/health',
      interval: '5m',
      timeout: 5000
    }
  });
}
```

### Database Query Tool
Execute database queries safely:

```typescript
class DatabaseTool {
  async createReadOnlyConnection(config: any) {
    return await client.createTool({
      name: `Database: ${config.name}`,
      type: 'database',
      config: {
        ...config,
        readonly: true,
        queryTimeout: 30000,
        allowedOperations: ['SELECT'],
        maxResultRows: 10000
      },
      authentication: {
        type: 'connection_string',
        connectionString: config.connectionString
      }
    });
  }
  
  async createWriteConnection(config: any) {
    return await client.createTool({
      name: `Database Writer: ${config.name}`,
      type: 'database',
      config: {
        ...config,
        readonly: false,
        transactionMode: 'auto',
        queryTimeout: 60000
      },
      authentication: {
        type: 'connection_string',
        connectionString: config.connectionString
      }
    });
  }
}
```

### Webhook Tool
Create webhooks for external services:

```typescript
async function setupWebhookTool() {
  const webhookTool = await client.createTool({
    name: 'External Webhook',
    type: 'webhook',
    config: {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-Webhook-Source': 'Tolstoy'
      },
      timeout: 30000,
      retryOn: [408, 429, 500, 502, 503, 504],
      maxRetries: 3
    },
    authentication: {
      type: 'hmac',
      secret: '{{secret:webhook-secret}}',
      algorithm: 'sha256'
    }
  });
  
  return webhookTool;
}
```

## Advanced Features

### Tool Health Monitoring
```typescript
async function monitorToolHealth() {
  const tools = await client.listTools();
  const healthReport = [];
  
  for (const tool of tools.data) {
    const health = {
      name: tool.name,
      status: tool.status,
      lastCheck: tool.healthCheck?.lastCheck,
      responseTime: tool.metrics?.averageResponseTime,
      errorRate: tool.metrics?.errorRate
    };
    
    if (health.errorRate > 0.1) {
      console.warn(`⚠️ High error rate for ${tool.name}: ${health.errorRate}%`);
    }
    
    healthReport.push(health);
  }
  
  return healthReport;
}
```

### Dynamic Tool Configuration
```typescript
async function createDynamicTool(template: string, config: any) {
  const toolTemplate = {
    slack: {
      type: 'slack',
      config: { defaultChannel: config.channel },
      authentication: { type: 'bearer', token: config.token }
    },
    database: {
      type: 'postgresql',
      config: { host: config.host, database: config.database },
      authentication: { type: 'credentials', username: config.user }
    }
  };
  
  const toolConfig = toolTemplate[template];
  if (!toolConfig) throw new Error(`Unknown tool template: ${template}`);
  
  return await client.createTool({
    name: config.name,
    description: `Auto-generated ${template} tool`,
    ...toolConfig
  });
}
```

### Bulk Tool Management
```typescript
async function bulkCreateTools(toolConfigs: any[]) {
  const results = { successful: [], failed: [] };
  
  for (const config of toolConfigs) {
    try {
      const tool = await client.createTool(config);
      results.successful.push(tool.data);
      console.log(`✅ Created: ${config.name}`);
    } catch (error) {
      results.failed.push({ config, error: error.message });
      console.error(`❌ Failed: ${config.name} - ${error.message}`);
    }
  }
  
  return results;
}
```

## Tool Templates

### Common Tool Configurations
```typescript
const toolTemplates = {
  slack: (config: any) => ({
    name: config.name || 'Slack Integration',
    type: 'slack',
    config: {
      webhookUrl: config.webhookUrl,
      defaultChannel: config.channel || '#general'
    }
  }),
  
  email: (config: any) => ({
    name: config.name || 'Email Service',
    type: 'email',
    config: {
      provider: config.provider,
      defaultFrom: config.from,
      templates: config.templates
    },
    authentication: {
      type: 'api_key',
      apiKey: config.apiKey
    }
  }),
  
  database: (config: any) => ({
    name: config.name || 'Database Connection',
    type: 'database',
    config: {
      host: config.host,
      port: config.port,
      database: config.database,
      ssl: config.ssl || false
    },
    authentication: {
      type: 'credentials',
      username: config.username,
      password: config.password
    }
  })
};
```

## Best Practices

- **Secure credential storage** - always use secret references for sensitive data
- **Implement health checks** - monitor tool availability and performance
- **Set appropriate timeouts** - prevent workflows from hanging on slow APIs
- **Use rate limiting** - respect external API limits and avoid throttling
- **Handle errors gracefully** - implement retry policies for transient failures
- **Test tool connections** - verify connectivity before using in production workflows
- **Monitor tool usage** - track API calls and costs for budget management
- **Version control tool configs** - maintain history of tool configuration changes