---
title: Users
sidebar_position: 4
---

# Users

Manage users within your organization. Handle user creation, permissions, roles, and access control for your Tolstoy workflow automation platform.

## Overview

User management enables you to:
- **Create and invite users** to your organization
- **Manage role-based permissions** with granular access control
- **Track user activity** and engagement metrics
- **Import users in bulk** from CSV files or external systems
- **Monitor user onboarding** and adoption rates

## User Methods

### User Management
- **[listUsers()](list-users)** - List all users in the organization with permissions and activity data
- **[createUser()](create-user)** - Create new users with role-based access control and invitation system

## Quick Examples

### List Organization Users
```typescript
const users = await client.listUsers();

users.data.forEach(user => {
  console.log(`${user.name} (${user.email})`);
  console.log(`Role: ${user.role}, Status: ${user.status}`);
  console.log(`Last Login: ${user.lastLoginAt || 'Never'}`);
});
```

### Create New User
```typescript
const user = await client.createUser({
  email: 'john.doe@company.com',
  name: 'John Doe',
  role: 'member',
  sendInvitation: true
});

console.log(`Created user: ${user.data.name}`);
console.log(`Invitation status: ${user.data.status}`);
```

### Bulk User Creation
```typescript
const userList = [
  { email: 'dev1@company.com', name: 'Developer One', role: 'member' },
  { email: 'manager@company.com', name: 'Project Manager', role: 'admin' }
];

for (const userData of userList) {
  try {
    const user = await client.createUser(userData);
    console.log(`✅ Created: ${userData.name}`);
  } catch (error) {
    console.error(`❌ Failed: ${userData.name} - ${error.message}`);
  }
}
```

## Role-Based Access Control

### Available Roles
- **Owner** - Full organization control
- **Admin** - User management and advanced features
- **Member** - Create and execute workflows
- **Viewer** - Read-only access to workflows and analytics

### Permission Matrix
```typescript
const permissions = {
  viewer: { canCreateFlows: false, canExecuteFlows: false, canManageUsers: false },
  member: { canCreateFlows: true, canExecuteFlows: true, canManageUsers: false },
  admin: { canCreateFlows: true, canExecuteFlows: true, canManageUsers: true },
  owner: { canCreateFlows: true, canExecuteFlows: true, canManageUsers: true }
};
```

## Common Use Cases

### Team Onboarding
Set up entire teams with appropriate roles:

```typescript
async function onboardTeam(teamData: TeamData) {
  const results = [];
  
  for (const member of teamData.members) {
    try {
      const user = await client.createUser({
        email: member.email,
        name: member.name,
        role: member.role,
        sendInvitation: true
      });
      results.push({ success: true, user });
    } catch (error) {
      results.push({ success: false, error: error.message });
    }
  }
  
  return results;
}
```

### User Activity Monitoring
Track user engagement and identify inactive users:

```typescript
async function analyzeUserActivity() {
  const users = await client.listUsers();
  const thirtyDaysAgo = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);
  
  const analysis = {
    total: users.data.length,
    active: 0,
    inactive: 0,
    neverLoggedIn: 0
  };
  
  users.data.forEach(user => {
    if (!user.lastLoginAt) {
      analysis.neverLoggedIn++;
    } else if (new Date(user.lastLoginAt) < thirtyDaysAgo) {
      analysis.inactive++;
    } else {
      analysis.active++;
    }
  });
  
  return analysis;
}
```

### CSV User Import
Import users from CSV files:

```typescript
class UserImporter {
  async importFromCSV(csvData: string) {
    const lines = csvData.split('\n');
    const headers = lines[0].split(',');
    const results = { successful: [], failed: [] };
    
    for (let i = 1; i < lines.length; i++) {
      const values = lines[i].split(',');
      const userData = {
        email: values[0],
        name: values[1],
        role: values[2] || 'member'
      };
      
      try {
        const user = await client.createUser(userData);
        results.successful.push(user.data);
      } catch (error) {
        results.failed.push({ userData, error: error.message });
      }
    }
    
    return results;
  }
}
```

### Permission Auditing
Audit user permissions across the organization:

```typescript
async function auditUserPermissions() {
  const users = await client.listUsers();
  const issues = [];
  
  users.data.forEach(user => {
    // Check for permission inconsistencies
    if (user.role === 'viewer' && user.permissions.canCreateFlows) {
      issues.push(`${user.name} (viewer) has create flows permission`);
    }
    
    if (user.role === 'owner' && !user.permissions.canManageUsers) {
      issues.push(`${user.name} (owner) missing manage users permission`);
    }
  });
  
  return issues;
}
```

## Integration Patterns

### User Directory Component
```typescript
function UserDirectory({ onUserSelect }) {
  const [users, setUsers] = useState([]);
  const [filter, setFilter] = useState('all');
  
  useEffect(() => {
    client.listUsers().then(result => setUsers(result.data));
  }, []);
  
  const filteredUsers = users.filter(user => {
    if (filter === 'active') return user.status === 'active';
    if (filter === 'invited') return user.status === 'invited';
    return true;
  });
  
  return (
    <div>
      <select value={filter} onChange={(e) => setFilter(e.target.value)}>
        <option value="all">All Users</option>
        <option value="active">Active</option>
        <option value="invited">Invited</option>
      </select>
      
      {filteredUsers.map(user => (
        <div key={user.id} onClick={() => onUserSelect(user)}>
          <h3>{user.name}</h3>
          <p>{user.email} - {user.role}</p>
          <span className={`status ${user.status}`}>{user.status}</span>
        </div>
      ))}
    </div>
  );
}
```

### User Invitation System
```typescript
async function inviteUserWithCustomMessage(userData: any, message: string) {
  const user = await client.createUser({
    ...userData,
    sendInvitation: true
  });
  
  // Send custom welcome message
  await sendCustomWelcomeEmail(user.data.email, message);
  
  return user;
}
```

## Best Practices

- **Validate email addresses** before creating users to avoid bounced invitations
- **Use appropriate roles** - don't give users more permissions than they need
- **Monitor invitation status** and resend invitations for users who haven't accepted
- **Implement user cleanup** for inactive users to manage license costs
- **Track user onboarding** to improve adoption rates
- **Set up activity alerts** for suspicious user behavior
- **Backup user data** before making bulk changes
- **Test permission changes** in a development environment first