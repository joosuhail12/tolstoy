---
title: TypeScript SDK
sidebar_position: 5
---

# @tolstoy/sdk

The official TypeScript SDK for the Tolstoy workflow automation platform. Build powerful integrations with type safety and modern JavaScript/TypeScript patterns.

## Installation

```bash
npm install @joosuhail/tolstoy-sdk
```

```bash
yarn add @joosuhail/tolstoy-sdk
```

## Quick Start

```typescript
import { TolstoyClient } from '@joosuhail/tolstoy-sdk';

const client = new TolstoyClient(
  'https://api.tolstoy.io',
  'your-org-id',
  'your-user-id',
  'optional-bearer-token'
);

// Execute a workflow
const execution = await client.runFlow('flow_123', {
  userId: 'user_456',
  email: 'user@example.com'
});

console.log(`Execution started: ${execution.data.executionId}`);
```

## Authentication

The Tolstoy SDK supports multi-tenant authentication using organization and user context headers:

```typescript
const client = new TolstoyClient(
  'https://tolstoy.getpullse.com', // Base URL
  'org_abc123',                     // Organization ID (required)
  'user_def456',                    // User ID (required)  
  'your_bearer_token'               // Optional Bearer token
);
```

### Header Configuration

The SDK automatically adds these headers to all requests:
- `x-org-id`: Your organization identifier
- `x-user-id`: User context for the request
- `Authorization`: Bearer token (if provided)

## Core Features

### Workflow Execution

Execute workflows with full type safety and error handling:

```typescript
// Execute workflow asynchronously (recommended)
const execution = await client.runFlow('flow_123', {
  variables: {
    userId: 'user_123',
    email: 'user@example.com',
    customField: 'value'
  },
  useDurable: true // Default: async execution
});

// Get execution status
const status = await client.getFlowExecution(
  'flow_123', 
  execution.data.executionId
);

console.log(`Status: ${status.data.status}`);
```

### Flow Management

List and manage your workflows:

```typescript
// List all flows
const flows = await client.listFlows();
flows.data.forEach(flow => {
  console.log(`${flow.name}: ${flow.description}`);
});

// Access raw API for advanced operations
const flowDetails = await client.raw.flows.flowsControllerFindOne('flow_123');
```

### Tool Integrations

Create and manage external API integrations:

```typescript
// Create a new tool integration
const tool = await client.createTool({
  name: 'GitHub API',
  baseUrl: 'https://api.github.com',
  authType: 'bearer',
  description: 'GitHub REST API integration'
});

// List existing tools
const tools = await client.listTools();
console.log(`You have ${tools.data.length} tool integrations`);
```

### Webhook Management

Set up event-driven integrations:

```typescript
// Create a webhook
const webhook = await client.createWebhook({
  name: 'Flow Completion Webhook',
  url: 'https://your-app.com/webhooks/tolstoy',
  events: ['flow.completed', 'flow.failed'],
  active: true
});

// List webhooks
const webhooks = await client.listWebhooks();
```

## Advanced Usage

### Direct API Access

For operations not covered by helper methods, access the generated API directly:

```typescript
// Full control over API calls
const organizations = await client.raw.organizations.organizationsControllerFindAll();

// Access to all endpoints with full TypeScript types
const healthCheck = await client.raw.health.healthControllerGetDetailedHealth();

// Custom request parameters
const flows = await client.raw.flows.flowsControllerFindAll({
  params: {
    limit: 10,
    offset: 0
  }
});
```

### Error Handling

The SDK provides comprehensive error handling:

```typescript
try {
  const execution = await client.runFlow('invalid_flow_id', {});
} catch (error) {
  if (error.response) {
    // API error response
    console.error('API Error:', error.response.data);
    console.error('Status Code:', error.response.status);
  } else if (error.request) {
    // Network error
    console.error('Network Error:', error.message);
  } else {
    // Other error
    console.error('Error:', error.message);
  }
}
```

### TypeScript Support

The SDK is built with full TypeScript support:

```typescript
import { TolstoyClient, Api } from '@joosuhail/tolstoy-sdk';

// All API responses are fully typed
interface FlowExecutionResult {
  executionId: string;
  status: 'running' | 'completed' | 'failed';
  // ... other fields with types
}

const execution: FlowExecutionResult = await client.runFlow('flow_123', {
  userId: 'user_456'
});

// IntelliSense and type checking throughout
const status = execution.status; // Type: 'running' | 'completed' | 'failed'
```

## Real-World Examples

### User Onboarding Automation

```typescript
import { TolstoyClient } from '@joosuhail/tolstoy-sdk';

class UserOnboarding {
  private tolstoy: TolstoyClient;

  constructor(orgId: string, userId: string) {
    this.tolstoy = new TolstoyClient(
      process.env.TOLSTOY_API_URL!,
      orgId,
      userId,
      process.env.TOLSTOY_TOKEN
    );
  }

  async onboardNewUser(userData: {
    email: string;
    name: string;
    plan: string;
  }) {
    try {
      // Execute onboarding workflow
      const execution = await this.tolstoy.runFlow('user_onboarding_flow', {
        user: userData,
        timestamp: new Date().toISOString(),
        source: 'signup_form'
      });

      // Set up completion webhook
      await this.tolstoy.createWebhook({
        name: `Onboarding Webhook - ${userData.email}`,
        url: `${process.env.APP_URL}/webhooks/onboarding-complete`,
        events: ['flow.completed'],
        metadata: {
          executionId: execution.data.executionId,
          userEmail: userData.email
        }
      });

      return execution.data.executionId;
    } catch (error) {
      console.error('Onboarding failed:', error);
      throw error;
    }
  }
}
```

### Monitoring and Analytics

```typescript
import { TolstoyClient } from '@joosuhail/tolstoy-sdk';

async function getWorkflowAnalytics(orgId: string) {
  const client = new TolstoyClient(
    'https://tolstoy.getpullse.com',
    orgId,
    'analytics_user'
  );

  // Get all flows and their metrics
  const flows = await client.listFlows();
  const analytics = [];

  for (const flow of flows.data) {
    const metrics = await client.raw.flows.flowsControllerGetMetrics(flow.id);
    analytics.push({
      flowName: flow.name,
      totalExecutions: metrics.data.totalExecutions,
      successRate: metrics.data.successRate,
      avgDuration: metrics.data.avgDurationMs
    });
  }

  return analytics;
}
```

## API Reference

### TolstoyClient

#### Constructor

```typescript
new TolstoyClient(
  baseUrl: string,
  orgId?: string,
  userId?: string, 
  token?: string
)
```

#### Methods

| Method | Description | Returns |
|--------|-------------|---------|
| `runFlow(flowId, inputs, useDurable?)` | Execute a workflow | `Promise<ExecutionResult>` |
| `getFlowExecution(flowId, executionId)` | Get execution status | `Promise<ExecutionStatus>` |
| `listFlows()` | List all workflows | `Promise<Flow[]>` |
| `createTool(toolData)` | Create tool integration | `Promise<Tool>` |
| `listTools()` | List tool integrations | `Promise<Tool[]>` |
| `createWebhook(webhookData)` | Create webhook | `Promise<Webhook>` |
| `listWebhooks()` | List webhooks | `Promise<Webhook[]>` |

#### Properties

| Property | Description | Type |
|----------|-------------|------|
| `raw` | Direct access to generated API | `Api<unknown>` |

## Support

- **Documentation**: [https://docs.tolstoy.dev](https://docs.tolstoy.dev)
- **GitHub**: [https://github.com/tolstoy-dev/sdk-typescript](https://github.com/tolstoy-dev/sdk-typescript)
- **Issues**: [Report bugs and request features](https://github.com/tolstoy-dev/sdk-typescript/issues)
- **Community**: Join our developer community for support

## Contributing

We welcome contributions! Please see our [Contributing Guide](https://github.com/tolstoy-dev/sdk-typescript/blob/main/CONTRIBUTING.md) for details.

## License

MIT License. See [LICENSE](https://github.com/tolstoy-dev/sdk-typescript/blob/main/LICENSE) for details.

---

*This SDK is automatically generated from the Tolstoy OpenAPI specification and is always up-to-date with the latest API changes.*