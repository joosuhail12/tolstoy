---
title: Quick Start
sidebar_position: 2
---

# Quick Start

Get up and running with the Tolstoy SDK in under 2 minutes with complete examples and real-world patterns.

## Installation

First, install the Tolstoy SDK:

```bash
npm install @joosuhail/tolstoy-sdk
```

## Basic Setup

There are multiple ways to initialize the Tolstoy client depending on your use case:

### Simple Initialization

```typescript
import { TolstoyClient } from '@joosuhail/tolstoy-sdk';

// Minimal setup - perfect for getting started
const client = new TolstoyClient(
  'https://tolstoy.getpullse.com', // Base URL
  'your-org-id',                    // Organization ID
  'your-user-id',                   // User ID
  'optional-bearer-token'           // Optional authentication token
);
```

### Production-Ready Setup

```typescript
import { TolstoyClient } from '@joosuhail/tolstoy-sdk';

// Production setup with error handling and environment variables
const client = new TolstoyClient(
  process.env.TOLSTOY_API_URL || 'https://tolstoy.getpullse.com',
  process.env.TOLSTOY_ORG_ID!,
  process.env.TOLSTOY_USER_ID!,
  process.env.TOLSTOY_API_TOKEN
);

// Verify connection
try {
  const health = await client.raw.health.healthControllerGetHealth();
  console.log('‚úÖ Connected to Tolstoy:', health.data.status);
} catch (error) {
  console.error('‚ùå Failed to connect:', error.message);
  process.exit(1);
}
```

## Your First Workflow Execution

### Step 1: Execute a Workflow

```typescript
// Execute a workflow with comprehensive error handling
try {
  const execution = await client.runFlow('flow_123', {
    userId: 'user_456',
    email: 'user@example.com',
    customData: 'any value',
    timestamp: new Date().toISOString(),
    // You can pass any JSON-serializable data
    metadata: {
      source: 'quickstart_guide',
      version: '1.0'
    }
  });
  
  console.log(`‚úÖ Execution started: ${execution.data.executionId}`);
  console.log(`üìä Initial status: ${execution.data.status}`);
} catch (error) {
  console.error('‚ùå Workflow execution failed:', error.message);
  // Handle specific error types
  if (error.response?.status === 404) {
    console.error('Workflow not found. Check the flow ID.');
  } else if (error.response?.status === 403) {
    console.error('Permission denied. Check your API credentials.');
  }
}
```

### Step 2: Monitor Execution Progress

```typescript
// Check execution status with polling
async function waitForCompletion(flowId: string, executionId: string) {
  let attempts = 0;
  const maxAttempts = 30; // 5 minutes with 10-second intervals
  
  while (attempts < maxAttempts) {
    try {
      const status = await client.getFlowExecution(flowId, executionId);
      console.log(`üìà Status: ${status.data.status} (attempt ${attempts + 1})`);
      
      // Check if execution is complete
      if (['completed', 'failed', 'cancelled'].includes(status.data.status)) {
        if (status.data.status === 'completed') {
          console.log('üéâ Workflow completed successfully!');
          console.log('üìã Result:', JSON.stringify(status.data.result, null, 2));
        } else {
          console.log(`üí• Workflow ${status.data.status}:`, status.data.error);
        }
        return status.data;
      }
      
      // Wait before next check
      await new Promise(resolve => setTimeout(resolve, 10000)); // 10 seconds
      attempts++;
    } catch (error) {
      console.error('‚ùå Error checking status:', error.message);
      attempts++;
    }
  }
  
  console.log('‚è∞ Timeout waiting for workflow completion');
  return null;
}

// Usage
const execution = await client.runFlow('flow_123', { userId: 'user_456' });
const result = await waitForCompletion('flow_123', execution.data.executionId);
```

## Common Operations

### List and Explore Available Flows

```typescript
// Get all flows with detailed information
const flows = await client.listFlows();

console.log(`üìö Found ${flows.data.length} workflows:`);
flows.data.forEach((flow, index) => {
  console.log(`\n${index + 1}. ${flow.name} (${flow.id})`);
  console.log(`   üìù ${flow.description || 'No description'}`);
  console.log(`   üè∑Ô∏è  Status: ${flow.active ? '‚úÖ Active' : '‚ùå Inactive'}`);
  console.log(`   üìÖ Created: ${new Date(flow.createdAt).toLocaleDateString()}`);
  
  // Show flow categories if available
  if (flow.tags?.length > 0) {
    console.log(`   üè∑Ô∏è  Tags: ${flow.tags.join(', ')}`);
  }
});

// Filter flows by criteria
const activeFlows = flows.data.filter(flow => flow.active);
const userOnboardingFlows = flows.data.filter(flow => 
  flow.name.toLowerCase().includes('onboard') || 
  flow.description?.toLowerCase().includes('onboard')
);

console.log(`\nüéØ ${activeFlows.length} active workflows`);
console.log(`üë• ${userOnboardingFlows.length} onboarding workflows`);
```

### Create Tool Integrations

```typescript
// Create different types of tool integrations

// 1. API Key Authentication (most common)
const githubTool = await client.createTool({
  name: 'GitHub API',
  baseUrl: 'https://api.github.com',
  authType: 'bearer',
  description: 'GitHub REST API integration',
  headers: {
    'Accept': 'application/vnd.github.v3+json',
    'User-Agent': 'Tolstoy-Integration/1.0'
  }
});
console.log(`üîß GitHub tool created: ${githubTool.data.id}`);

// 2. Database Connection
const dbTool = await client.createTool({
  name: 'PostgreSQL Database',
  baseUrl: 'postgresql://localhost:5432/myapp',
  authType: 'basic',
  description: 'Primary application database',
  config: {
    ssl: true,
    poolSize: 10
  }
});
console.log(`üóÑÔ∏è  Database tool created: ${dbTool.data.id}`);

// 3. Webhook Endpoint
const webhookTool = await client.createTool({
  name: 'Slack Notifications',
  baseUrl: 'https://hooks.slack.com/services',
  authType: 'none',
  description: 'Send notifications to Slack channels'
});
console.log(`üîî Webhook tool created: ${webhookTool.data.id}`);

// List all tools
const tools = await client.listTools();
console.log(`\nüõ†Ô∏è  Total tools configured: ${tools.data.length}`);
```

### Set Up Event Webhooks

```typescript
// Create comprehensive webhook monitoring

// 1. Workflow Events Webhook
const workflowWebhook = await client.createWebhook({
  name: 'Workflow Events Monitor',
  url: 'https://your-app.com/api/webhooks/workflows',
  events: [
    'flow.started',    // When workflow begins
    'flow.completed',  // When workflow finishes successfully
    'flow.failed',     // When workflow encounters an error
    'flow.cancelled'   // When workflow is manually cancelled
  ],
  active: true,
  secret: 'webhook_secret_key_for_verification', // For security
  headers: {
    'X-Source': 'tolstoy-workflows',
    'Authorization': 'Bearer your-webhook-token'
  }
});
console.log(`üîó Workflow webhook created: ${workflowWebhook.data.id}`);

// 2. System Events Webhook
const systemWebhook = await client.createWebhook({
  name: 'System Events Monitor',
  url: 'https://your-app.com/api/webhooks/system',
  events: [
    'tool.connected',  // Tool integrations
    'tool.failed',     // Tool connection failures
    'user.created',    // New users
    'org.updated'      // Organization changes
  ],
  active: true,
  metadata: {
    environment: 'production',
    version: '1.0',
    team: 'engineering'
  }
});
console.log(`‚öôÔ∏è  System webhook created: ${systemWebhook.data.id}`);

// List all webhooks
const webhooks = await client.listWebhooks();
console.log(`\nü™ù Total webhooks configured: ${webhooks.data.length}`);
webhooks.data.forEach(webhook => {
  console.log(`   ‚Ä¢ ${webhook.name}: ${webhook.url}`);
  console.log(`     Events: ${webhook.events.join(', ')}`);
  console.log(`     Status: ${webhook.active ? '‚úÖ Active' : '‚ùå Inactive'}`);
});
```

## Comprehensive Error Handling

```typescript
// Production-ready error handling with specific error types
class WorkflowService {
  private client: TolstoyClient;
  
  constructor() {
    this.client = new TolstoyClient(
      process.env.TOLSTOY_API_URL!,
      process.env.TOLSTOY_ORG_ID!,
      process.env.TOLSTOY_USER_ID!
    );
  }
  
  async executeWorkflowSafely(flowId: string, inputs: any) {
    const startTime = Date.now();
    
    try {
      console.log(`üöÄ Starting workflow ${flowId}...`);
      
      const execution = await this.client.runFlow(flowId, inputs);
      
      console.log(`‚úÖ Workflow started successfully in ${Date.now() - startTime}ms`);
      return { success: true, execution: execution.data };
      
    } catch (error) {
      console.error(`‚ùå Workflow failed after ${Date.now() - startTime}ms`);
      
      // Handle different error scenarios
      if (error.response) {
        const status = error.response.status;
        const data = error.response.data;
        
        switch (status) {
          case 400:
            console.error('üîç Validation Error:', data.message || 'Invalid input data');
            if (data.details) {
              console.error('üìã Validation Details:', JSON.stringify(data.details, null, 2));
            }
            return { success: false, error: 'validation_failed', details: data.details };
            
          case 401:
            console.error('üîê Authentication Error: Invalid or expired credentials');
            return { success: false, error: 'auth_failed' };
            
          case 403:
            console.error('üö´ Permission Error: Insufficient permissions for this operation');
            return { success: false, error: 'permission_denied' };
            
          case 404:
            console.error(`üì≠ Not Found: Workflow '${flowId}' does not exist`);
            return { success: false, error: 'workflow_not_found' };
            
          case 429:
            console.error('‚è≥ Rate Limited: Too many requests, please wait');
            const retryAfter = error.response.headers['retry-after'] || 60;
            console.log(`üí° Retry after ${retryAfter} seconds`);
            return { success: false, error: 'rate_limited', retryAfter };
            
          case 500:
            console.error('üî• Server Error:', data.message || 'Internal server error');
            return { success: false, error: 'server_error' };
            
          default:
            console.error(`ü§î Unexpected Error (${status}):`, data.message || error.message);
            return { success: false, error: 'unknown_api_error', status, message: data.message };
        }
      } else if (error.request) {
        // Network connectivity issues
        console.error('üåê Network Error: Unable to reach Tolstoy API');
        console.error('üí° Check your internet connection and API URL');
        return { success: false, error: 'network_error' };
      } else {
        // Other errors (SDK bugs, invalid parameters, etc.)
        console.error('‚ö†Ô∏è  Unexpected Error:', error.message);
        return { success: false, error: 'unexpected_error', message: error.message };
      }
    }
  }
  
  // Example usage with retry logic
  async executeWithRetry(flowId: string, inputs: any, maxRetries = 3) {
    for (let attempt = 1; attempt <= maxRetries; attempt++) {
      console.log(`üîÑ Attempt ${attempt}/${maxRetries}`);
      
      const result = await this.executeWorkflowSafely(flowId, inputs);
      
      if (result.success) {
        return result;
      }
      
      // Don't retry for certain error types
      if (['validation_failed', 'auth_failed', 'permission_denied', 'workflow_not_found'].includes(result.error)) {
        console.log('‚ùå Non-retriable error, giving up');
        return result;
      }
      
      // Handle rate limiting
      if (result.error === 'rate_limited') {
        const waitTime = (result.retryAfter || 60) * 1000;
        console.log(`‚è≥ Waiting ${waitTime / 1000} seconds due to rate limiting...`);
        await new Promise(resolve => setTimeout(resolve, waitTime));
        continue;
      }
      
      if (attempt < maxRetries) {
        const delay = Math.min(1000 * Math.pow(2, attempt - 1), 30000); // Exponential backoff, max 30s
        console.log(`‚è≥ Waiting ${delay / 1000} seconds before retry...`);
        await new Promise(resolve => setTimeout(resolve, delay));
      }
    }
    
    console.log('üí• All retry attempts failed');
    return { success: false, error: 'max_retries_exceeded' };
  }
}

// Usage example
const workflowService = new WorkflowService();

const result = await workflowService.executeWithRetry('user_onboarding_flow', {
  userId: 'user_123',
  email: 'user@example.com',
  plan: 'premium'
});

if (result.success) {
  console.log('üéâ Workflow completed:', result.execution.executionId);
} else {
  console.log('üòû Workflow failed:', result.error);
  // Handle failure in your application logic
}
```

## TypeScript Support

The SDK provides full type safety:

```typescript
import { TolstoyClient } from '@joosuhail/tolstoy-sdk';

const client = new TolstoyClient(baseUrl, orgId, userId);

// All responses are fully typed
const execution = await client.runFlow('flow_123', {
  userId: 'user_456'
});

// TypeScript knows the response structure
const executionId: string = execution.data.executionId;
const status: 'running' | 'completed' | 'failed' = execution.data.status;
```

## Real-World Integration Example

```typescript
// Complete example: User onboarding system
class UserOnboardingSystem {
  private tolstoy: TolstoyClient;
  
  constructor() {
    this.tolstoy = new TolstoyClient(
      process.env.TOLSTOY_API_URL!,
      process.env.TOLSTOY_ORG_ID!,
      'onboarding_service'
    );
  }
  
  async onboardUser(userData: {
    email: string;
    name: string;
    plan: 'free' | 'pro' | 'enterprise';
    referralCode?: string;
  }) {
    try {
      // 1. Execute onboarding workflow
      const onboarding = await this.tolstoy.runFlow('user_onboarding_v2', {
        user: userData,
        timestamp: new Date().toISOString(),
        source: 'signup_form',
        features: this.getFeaturesForPlan(userData.plan)
      });
      
      console.log(`üéØ Onboarding started for ${userData.email}`);
      
      // 2. Set up monitoring webhook for this specific user
      const webhook = await this.tolstoy.createWebhook({
        name: `Onboarding Monitor - ${userData.email}`,
        url: `${process.env.APP_URL}/webhooks/onboarding/${userData.email}`,
        events: ['flow.completed', 'flow.failed'],
        active: true,
        metadata: {
          userId: userData.email,
          executionId: onboarding.data.executionId,
          plan: userData.plan
        }
      });
      
      // 3. Schedule welcome email tool execution
      const emailTool = await this.tolstoy.createTool({
        name: `Welcome Email - ${userData.email}`,
        baseUrl: 'https://api.sendgrid.com/v3',
        authType: 'bearer',
        description: 'Send personalized welcome email'
      });
      
      return {
        success: true,
        onboardingId: onboarding.data.executionId,
        webhookId: webhook.data.id,
        emailToolId: emailTool.data.id,
        estimatedCompletion: '5-10 minutes'
      };
      
    } catch (error) {
      console.error(`‚ùå Onboarding failed for ${userData.email}:`, error.message);
      
      // Send failure notification
      await this.notifyOnboardingFailure(userData.email, error.message);
      
      throw new Error(`Onboarding system error: ${error.message}`);
    }
  }
  
  private getFeaturesForPlan(plan: string) {
    const features = {
      free: ['basic_dashboard', 'community_support'],
      pro: ['advanced_analytics', 'email_support', 'api_access'],
      enterprise: ['custom_integrations', 'dedicated_support', 'sso', 'audit_logs']
    };
    return features[plan] || features.free;
  }
  
  private async notifyOnboardingFailure(email: string, error: string) {
    // Implement your notification logic
    console.log(`üö® ALERT: Onboarding failed for ${email} - ${error}`);
  }
}

// Usage
const onboarding = new UserOnboardingSystem();

const result = await onboarding.onboardUser({
  email: 'john@startup.com',
  name: 'John Doe',
  plan: 'pro',
  referralCode: 'FRIEND2024'
});

console.log('üéâ Onboarding system result:', result);
```

## Next Steps

Now that you've got the basics, explore more advanced features:

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">üîê Authentication</h3>
    <p className="text-sm text-gray-600 mb-3">Configure secure access with API keys, OAuth2, and service accounts.</p>
    <a href="/sdk/authentication" className="text-blue-600 font-medium">Authentication Guide ‚Üí</a>
  </div>
  
  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">üîß Core Features</h3>
    <p className="text-sm text-gray-600 mb-3">Master workflows, tools, webhooks, and advanced execution patterns.</p>
    <a href="/sdk/core-features" className="text-blue-600 font-medium">Core Features ‚Üí</a>
  </div>
  
  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">üí° Real Examples</h3>
    <p className="text-sm text-gray-600 mb-3">See complete implementations for common use cases and patterns.</p>
    <a href="/sdk/examples" className="text-blue-600 font-medium">Examples ‚Üí</a>
  </div>
  
  <div className="border rounded-lg p-4">
    <h3 className="text-lg font-semibold mb-2">üìö API Reference</h3>
    <p className="text-sm text-gray-600 mb-3">Complete documentation of all SDK methods and types.</p>
    <a href="/sdk/api-reference" className="text-blue-600 font-medium">API Reference ‚Üí</a>
  </div>
</div>

## Quick Reference

| Operation | Code Example | Purpose |
|-----------|--------------|----------|
| **Execute Workflow** | `await client.runFlow('flow_id', inputs)` | Run a workflow with data |
| **Check Status** | `await client.getFlowExecution('flow_id', 'exec_id')` | Monitor progress |
| **List Workflows** | `await client.listFlows()` | See available workflows |
| **Create Tool** | `await client.createTool({name, baseUrl, authType})` | Add external integration |
| **Setup Webhook** | `await client.createWebhook({name, url, events})` | Monitor events |
| **List Tools** | `await client.listTools()` | See configured tools |
| **Health Check** | `await client.raw.health.healthControllerGetHealth()` | Verify connection |

---

*üöÄ You're now ready to build powerful workflow automation with the Tolstoy SDK! Check out the examples section for complete implementation patterns.*