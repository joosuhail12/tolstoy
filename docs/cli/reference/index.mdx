---
title: "CLI Reference"
description: "Complete reference guide for all Tolstoy CLI commands, flags, options, and configuration settings."
---

# CLI Reference

Complete reference documentation for all Tolstoy CLI commands, global options, configuration settings, and environment variables.

## Global Options

These options are available for all CLI commands:

| Option | Short | Type | Description |
|--------|-------|------|-------------|
| `--help` | `-h` | boolean | Show help information |
| `--version` | `-V` | boolean | Show CLI version |
| `--verbose` | `-v` | boolean | Enable verbose output |
| `--quiet` | `-q` | boolean | Suppress non-essential output |
| `--output` | `-o` | string | Output format: `table`, `json`, `yaml`, `csv` |
| `--profile` | | string | Use specific configuration profile |
| `--api-url` | | string | Override API base URL |
| `--org-id` | | string | Override organization ID |
| `--user-id` | | string | Override user ID |
| `--timeout` | `-t` | duration | Operation timeout (e.g., `30s`, `5m`) |
| `--json` | | boolean | Shortcut for `--output json` |
| `--no-color` | | boolean | Disable colored output |

## Command Structure

```
tolstoy [global-options] <command> [command-options] [arguments]
```

### Examples

```bash
# Basic command usage
tolstoy flows list

# With global options
tolstoy --verbose --output json flows list --limit 10

# Override profile and configuration
tolstoy --profile production --timeout 60s flows execute my-workflow

# Help for specific command
tolstoy flows execute --help
```

## Core Commands

### tolstoy config

Manage CLI configuration and authentication.

| Subcommand | Description | Usage |
|------------|-------------|-------|
| `add` | Add new configuration profile | `tolstoy config add <profile> [options]` |
| `list` | List configuration profiles | `tolstoy config list [options]` |
| `use` | Switch to a configuration profile | `tolstoy config use <profile>` |
| `current` | Show current configuration | `tolstoy config current` |
| `get` | Get configuration value | `tolstoy config get <key>` |
| `set` | Set configuration value | `tolstoy config set <key> <value>` |
| `unset` | Remove configuration value | `tolstoy config unset <key>` |
| `delete` | Delete configuration profile | `tolstoy config delete <profile>` |
| `test` | Test configuration connectivity | `tolstoy config test [profile]` |
| `export` | Export configuration | `tolstoy config export [options]` |
| `import` | Import configuration | `tolstoy config import <file>` |
| `reset` | Reset configuration to defaults | `tolstoy config reset` |
| `validate` | Validate configuration | `tolstoy config validate [options]` |
| `debug` | Show debug information | `tolstoy config debug` |

#### Configuration Options

| Option | Type | Description | Default |
|--------|------|-------------|---------|
| `--api-url` | string | API base URL | `https://tolstoy.getpullse.com` |
| `--org-id` | string | Organization identifier | Required |
| `--user-id` | string | User identifier | Required |
| `--timeout` | duration | Default operation timeout | `30s` |
| `--output-format` | string | Default output format | `table` |
| `--non-interactive` | boolean | Skip interactive prompts | `false` |
| `--from-env` | boolean | Load from environment variables | `false` |

### tolstoy flows

Manage and execute workflows.

| Subcommand | Description | Usage |
|------------|-------------|-------|
| `list` | List workflows | `tolstoy flows list [options]` |
| `get` | Get workflow details | `tolstoy flows get <flow-id> [options]` |
| `create` | Create new workflow | `tolstoy flows create <file> [options]` |
| `update` | Update existing workflow | `tolstoy flows update <flow-id> <file> [options]` |
| `delete` | Delete workflow | `tolstoy flows delete <flow-id> [options]` |
| `execute` | Execute workflow | `tolstoy flows execute <flow-id> [options]` |
| `validate` | Validate workflow file | `tolstoy flows validate <file> [options]` |
| `deploy` | Deploy workflows from directory | `tolstoy flows deploy <directory> [options]` |
| `export` | Export workflow definition | `tolstoy flows export <flow-id> [options]` |
| `clone` | Clone existing workflow | `tolstoy flows clone <flow-id> <new-name> [options]` |
| `logs` | View execution logs | `tolstoy flows logs <flow-id> [options]` |
| `stats` | Show execution statistics | `tolstoy flows stats [options]` |
| `monitor` | Monitor workflow executions | `tolstoy flows monitor <flow-id> [options]` |

#### Flow List Options

| Option | Type | Description |
|--------|------|-------------|
| `--status` | string | Filter by status: `active`, `inactive`, `draft` |
| `--tags` | string[] | Filter by tags |
| `--name` | string | Filter by name pattern |
| `--author` | string | Filter by author |
| `--limit` | number | Maximum number of results |
| `--offset` | number | Number of results to skip |
| `--sort` | string | Sort field: `name`, `created`, `modified` |
| `--order` | string | Sort order: `asc`, `desc` |

#### Flow Execute Options

| Option | Type | Description |
|--------|------|-------------|
| `--input` | string | JSON input parameters |
| `--input-file` | string | Path to input JSON file |
| `--stdin` | boolean | Read input from stdin |
| `--sync` | boolean | Execute synchronously |
| `--async` | boolean | Execute asynchronously |
| `--timeout` | duration | Execution timeout |
| `--dry-run` | boolean | Validate without executing |
| `--debug` | boolean | Enable debug mode |
| `--save-results` | string | Save results to file |
| `--follow` | boolean | Follow execution progress |

### tolstoy actions

Manage and execute individual actions.

| Subcommand | Description | Usage |
|------------|-------------|-------|
| `list` | List available actions | `tolstoy actions list [options]` |
| `get` | Get action details | `tolstoy actions get <action-key> [options]` |
| `execute` | Execute single action | `tolstoy actions execute <action-key> [options]` |
| `create` | Create custom action | `tolstoy actions create <file> [options]` |
| `update` | Update action | `tolstoy actions update <action-key> <file> [options]` |
| `delete` | Delete action | `tolstoy actions delete <action-key> [options]` |
| `validate` | Validate action definition | `tolstoy actions validate <file> [options]` |
| `test` | Test action with inputs | `tolstoy actions test <action-key> [options]` |
| `logs` | View action execution logs | `tolstoy actions logs <action-key> [options]` |
| `stats` | Show action statistics | `tolstoy actions stats [options]` |

#### Action List Options

| Option | Type | Description |
|--------|------|-------------|
| `--category` | string | Filter by category |
| `--type` | string | Filter by type: `built-in`, `custom` |
| `--search` | string | Search in name/description |
| `--tags` | string[] | Filter by tags |
| `--limit` | number | Maximum number of results |

#### Action Execute Options

| Option | Type | Description |
|--------|------|-------------|
| `--input` | string | JSON input parameters |
| `--input-file` | string | Path to input JSON file |
| `--timeout` | duration | Execution timeout |
| `--dry-run` | boolean | Validate without executing |
| `--debug` | boolean | Enable debug mode |

### tolstoy tools

Manage tool integrations and connections.

| Subcommand | Description | Usage |
|------------|-------------|-------|
| `list` | List configured tools | `tolstoy tools list [options]` |
| `get` | Get tool configuration | `tolstoy tools get <tool-id> [options]` |
| `create` | Create new tool | `tolstoy tools create <file> [options]` |
| `update` | Update tool configuration | `tolstoy tools update <tool-id> <file> [options]` |
| `delete` | Delete tool | `tolstoy tools delete <tool-id> [options]` |
| `test` | Test tool connectivity | `tolstoy tools test <tool-id> [options]` |
| `health` | Check tool health | `tolstoy tools health [tool-id] [options]` |
| `auth` | Manage tool authentication | `tolstoy tools auth <subcommand> [options]` |
| `secrets` | Manage tool secrets | `tolstoy tools secrets <subcommand> [options]` |

#### Tool List Options

| Option | Type | Description |
|--------|------|-------------|
| `--type` | string | Filter by tool type |
| `--status` | string | Filter by status: `healthy`, `unhealthy`, `unknown` |
| `--tags` | string[] | Filter by tags |
| `--show-secrets` | boolean | Include secret information (masked) |

#### Tool Test Options

| Option | Type | Description |
|--------|------|-------------|
| `--timeout` | duration | Test timeout |
| `--verbose` | boolean | Show detailed test results |
| `--all` | boolean | Test all tools |
| `--fix-issues` | boolean | Attempt to fix detected issues |

### tolstoy users

Manage users and permissions.

| Subcommand | Description | Usage |
|------------|-------------|-------|
| `list` | List users | `tolstoy users list [options]` |
| `get` | Get user details | `tolstoy users get <user-id> [options]` |
| `create` | Create new user | `tolstoy users create [options]` |
| `update` | Update user information | `tolstoy users update <user-id> [options]` |
| `delete` | Delete user | `tolstoy users delete <user-id> [options]` |
| `invite` | Invite new user | `tolstoy users invite <email> [options]` |
| `permissions` | Manage permissions | `tolstoy users permissions <subcommand> [options]` |
| `activity` | View user activity | `tolstoy users activity <user-id> [options]` |
| `whoami` | Show current user | `tolstoy users whoami` |

#### User List Options

| Option | Type | Description |
|--------|------|-------------|
| `--role` | string | Filter by role |
| `--status` | string | Filter by status: `active`, `inactive` |
| `--teams` | string[] | Filter by team membership |
| `--search` | string | Search in name/email |
| `--limit` | number | Maximum number of results |

### tolstoy logs

View and analyze execution logs.

| Subcommand | Description | Usage |
|------------|-------------|-------|
| `list` | List execution logs | `tolstoy logs list [options]` |
| `get` | Get detailed log information | `tolstoy logs get <execution-id> [options]` |
| `follow` | Follow logs in real-time | `tolstoy logs follow <execution-id> [options]` |
| `search` | Search logs by content | `tolstoy logs search <query> [options]` |
| `export` | Export logs to file | `tolstoy logs export [options]` |
| `analyze` | Analyze log patterns | `tolstoy logs analyze [options]` |
| `stats` | Show log statistics | `tolstoy logs stats [options]` |
| `tail` | Show recent logs | `tolstoy logs tail [options]` |

#### Log Filtering Options

| Option | Type | Description |
|--------|------|-------------|
| `--since` | duration/date | Show logs since time |
| `--until` | duration/date | Show logs until time |
| `--status` | string | Filter by execution status |
| `--flow` | string | Filter by flow ID/name |
| `--user` | string | Filter by user |
| `--level` | string | Filter by log level |
| `--limit` | number | Maximum number of results |
| `--follow` | boolean | Follow new logs |

#### Log Export Options

| Option | Type | Description |
|--------|------|-------------|
| `--format` | string | Export format: `json`, `csv`, `jsonl` |
| `--compress` | string | Compression: `gzip`, `bzip2` |
| `--output` | string | Output file path |
| `--stream` | boolean | Stream output |

### tolstoy webhooks

Manage webhook endpoints and event subscriptions.

| Subcommand | Description | Usage |
|------------|-------------|-------|
| `list` | List webhook endpoints | `tolstoy webhooks list [options]` |
| `get` | Get webhook details | `tolstoy webhooks get <webhook-id> [options]` |
| `create` | Create new webhook | `tolstoy webhooks create [options]` |
| `update` | Update webhook | `tolstoy webhooks update <webhook-id> [options]` |
| `delete` | Delete webhook | `tolstoy webhooks delete <webhook-id> [options]` |
| `test` | Test webhook endpoint | `tolstoy webhooks test <webhook-id> [options]` |
| `logs` | View webhook delivery logs | `tolstoy webhooks logs <webhook-id> [options]` |
| `retry` | Retry failed deliveries | `tolstoy webhooks retry <delivery-id> [options]` |
| `events` | Manage event subscriptions | `tolstoy webhooks events <subcommand> [options]` |

#### Webhook Create Options

| Option | Type | Description |
|--------|------|-------------|
| `--url` | string | Webhook endpoint URL |
| `--events` | string[] | Event types to subscribe to |
| `--secret` | string | Webhook signing secret |
| `--headers` | string[] | Custom headers |
| `--timeout` | duration | Request timeout |
| `--retry-attempts` | number | Number of retry attempts |
| `--active` | boolean | Enable webhook |

## Environment Variables

### Configuration

| Variable | Description | Default |
|----------|-------------|---------|
| `TOLSTOY_API_URL` | API base URL | `https://tolstoy.getpullse.com` |
| `TOLSTOY_ORG_ID` | Organization ID | From config |
| `TOLSTOY_USER_ID` | User ID | From config |
| `TOLSTOY_API_KEY` | API authentication key | From config |
| `TOLSTOY_PROFILE` | Active configuration profile | `default` |
| `TOLSTOY_CONFIG_DIR` | Configuration directory | `~/.tolstoy` |

### Behavior

| Variable | Description | Default |
|----------|-------------|---------|
| `TOLSTOY_TIMEOUT` | Default operation timeout | `30s` |
| `TOLSTOY_OUTPUT_FORMAT` | Default output format | `table` |
| `TOLSTOY_VERBOSE` | Enable verbose output | `false` |
| `TOLSTOY_COLOR_OUTPUT` | Enable colored output | `true` |
| `TOLSTOY_CONFIRM_DESTRUCTIVE` | Confirm destructive operations | `true` |
| `TOLSTOY_AUTO_UPDATE_CHECK` | Check for updates | `true` |

### Performance

| Variable | Description | Default |
|----------|-------------|---------|
| `TOLSTOY_RETRY_ATTEMPTS` | Default retry attempts | `3` |
| `TOLSTOY_RETRY_DELAY` | Delay between retries | `1s` |
| `TOLSTOY_CONCURRENT_REQUESTS` | Max concurrent requests | `10` |
| `TOLSTOY_CACHE_DURATION` | Cache duration | `5m` |
| `TOLSTOY_PAGE_SIZE` | Default page size | `20` |

### Debugging

| Variable | Description | Default |
|----------|-------------|---------|
| `TOLSTOY_DEBUG` | Enable debug mode | `false` |
| `TOLSTOY_LOG_LEVEL` | Logging level | `info` |
| `TOLSTOY_LOG_FILE` | Log file path | Auto-generated |
| `TOLSTOY_DEBUG_NETWORK` | Debug network requests | `false` |
| `TOLSTOY_DEBUG_AUTH` | Debug authentication | `false` |

## Exit Codes

The CLI uses standard exit codes to indicate execution status:

| Code | Description |
|------|-------------|
| `0` | Success |
| `1` | General error |
| `2` | Invalid argument or option |
| `3` | Configuration error |
| `4` | Authentication error |
| `5` | Network error |
| `6` | Permission denied |
| `7` | Resource not found |
| `8` | Timeout |
| `9` | Validation error |
| `125` | CLI error |
| `126` | Command not executable |
| `127` | Command not found |
| `130` | Interrupted by user (Ctrl+C) |

## Configuration File Format

### Main Configuration

```json
{
  "current_profile": "default",
  "profiles": {
    "default": {
      "api_url": "https://tolstoy.getpullse.com",
      "org_id": "org_1234567890abcdef",
      "user_id": "user_abcdef1234567890",
      "timeout": "30s",
      "output_format": "table",
      "created_at": "2024-01-20T10:00:00Z",
      "settings": {
        "verbose": false,
        "color_output": true,
        "confirm_destructive": true
      }
    }
  },
  "global_settings": {
    "auto_update_check": true,
    "save_history": true,
    "cache_duration": "5m"
  }
}
```

### Authentication Configuration

```json
{
  "profiles": {
    "default": {
      "auth_method": "api_key",
      "api_key_hash": "sha256:...",
      "last_auth": "2024-01-20T10:00:00Z"
    },
    "oauth-profile": {
      "auth_method": "oauth",
      "token_expires_at": "2024-01-21T10:00:00Z",
      "refresh_token_hash": "sha256:...",
      "last_refresh": "2024-01-20T09:00:00Z"
    }
  }
}
```

## Output Formats

### Table Format (Default)

Human-readable tabular output with headers and aligned columns:

```
┌─────────────────────┬──────────────────────┬─────────────┬──────────────┐
│ Flow ID             │ Name                 │ Status      │ Last Modified│
├─────────────────────┼──────────────────────┼─────────────┼──────────────┤
│ flow_user_onboard   │ User Onboarding      │ Active      │ 2 days ago   │
│ flow_payment_proc   │ Payment Processing   │ Active      │ 1 week ago   │
└─────────────────────┴──────────────────────┴─────────────┴──────────────┘
```

### JSON Format

Machine-readable JSON output:

```json
[
  {
    "id": "flow_user_onboard",
    "name": "User Onboarding",
    "status": "active",
    "last_modified": "2024-01-18T14:30:00Z"
  }
]
```

### YAML Format

Human-readable YAML output:

```yaml
- id: flow_user_onboard
  name: User Onboarding
  status: active
  last_modified: '2024-01-18T14:30:00Z'
```

### CSV Format

Comma-separated values for data analysis:

```csv
id,name,status,last_modified
flow_user_onboard,User Onboarding,active,2024-01-18T14:30:00Z
flow_payment_proc,Payment Processing,active,2024-01-15T10:00:00Z
```

## Input Formats

### JSON Input

```bash
# Inline JSON
tolstoy flows execute my-flow --input '{"email": "user@example.com"}'

# From file
tolstoy flows execute my-flow --input-file ./input.json

# From stdin
echo '{"email": "user@example.com"}' | tolstoy flows execute my-flow --stdin
```

### Environment Variable Substitution

```bash
# Use environment variables in input
export USER_EMAIL="user@example.com"
tolstoy flows execute my-flow --input '{"email": "${USER_EMAIL}"}'

# Enable environment variable expansion
tolstoy flows execute my-flow --input-file input.json --expand-env
```

## Common Usage Patterns

### Piping and Chaining

```bash
# Filter and process results
tolstoy flows list --output json | jq '.[] | select(.status == "active") | .id'

# Chain commands
tolstoy flows list --status active --output json | \
  jq -r '.[].id' | \
  head -5 | \
  xargs -I {} tolstoy flows execute {} --input '{}'
```

### Batch Operations

```bash
# Process multiple items
for flow in $(tolstoy flows list --output json | jq -r '.[].id'); do
  echo "Processing: $flow"
  tolstoy flows validate "$flow"
done

# Parallel execution
tolstoy flows list --output json | jq -r '.[].id' | \
  xargs -P 5 -I {} tolstoy flows execute {} --input '{}' --async
```

### Configuration Management

```bash
# Environment-specific operations
ENVIRONMENT=production tolstoy --profile production flows list

# Temporary configuration override
tolstoy --api-url https://staging-api.tolstoy.com flows list

# Batch configuration updates
for profile in development staging production; do
  tolstoy config set timeout 60s --profile "$profile"
done
```

## Integration Examples

### Shell Scripts

```bash
#!/bin/bash
# Example shell integration

set -euo pipefail

# Function to check CLI status
check_cli_status() {
    if ! tolstoy config test --timeout 10s; then
        echo "CLI not configured or connection failed"
        exit 1
    fi
}

# Function to deploy with validation
deploy_with_validation() {
    local workflow_file="$1"
    
    # Validate first
    tolstoy flows validate "$workflow_file"
    
    # Deploy
    local flow_id=$(basename "$workflow_file" .yml)
    
    if tolstoy flows get "$flow_id" --quiet 2>/dev/null; then
        tolstoy flows update "$flow_id" "$workflow_file"
    else
        tolstoy flows create "$workflow_file"
    fi
}

# Main script
check_cli_status

for workflow in workflows/*.yml; do
    deploy_with_validation "$workflow"
done
```

### Programming Language Integration

<CodeGroup>
```python Python Integration
import subprocess
import json

def run_tolstoy_command(cmd):
    """Run tolstoy command and return parsed JSON output"""
    result = subprocess.run(
        f"tolstoy {cmd} --output json",
        shell=True,
        capture_output=True,
        text=True,
        check=True
    )
    return json.loads(result.stdout)

def list_active_flows():
    """List all active workflows"""
    return run_tolstoy_command("flows list --status active")

def execute_flow(flow_id, inputs):
    """Execute workflow with inputs"""
    inputs_json = json.dumps(inputs)
    cmd = f"flows execute {flow_id} --input '{inputs_json}'"
    return run_tolstoy_command(cmd)

# Usage
flows = list_active_flows()
for flow in flows:
    print(f"Flow: {flow['name']} ({flow['id']})")
```

```javascript Node.js Integration
const { exec } = require('child_process');
const { promisify } = require('util');

const execAsync = promisify(exec);

class TolstoyClient {
    async runCommand(command, options = {}) {
        const cmd = `tolstoy ${command} --output json`;
        const { stdout, stderr } = await execAsync(cmd, options);
        
        if (stderr) {
            throw new Error(`Tolstoy CLI error: ${stderr}`);
        }
        
        return JSON.parse(stdout);
    }

    async listFlows(filters = {}) {
        let command = 'flows list';
        
        if (filters.status) {
            command += ` --status ${filters.status}`;
        }
        
        return this.runCommand(command);
    }

    async executeFlow(flowId, inputs, options = {}) {
        const inputsJson = JSON.stringify(inputs);
        let command = `flows execute ${flowId} --input '${inputsJson}'`;
        
        if (options.async) {
            command += ' --async';
        }
        
        return this.runCommand(command);
    }
}

// Usage
const client = new TolstoyClient();

async function main() {
    try {
        const flows = await client.listFlows({ status: 'active' });
        console.log(`Found ${flows.length} active flows`);
        
        for (const flow of flows.slice(0, 3)) {
            const result = await client.executeFlow(flow.id, {}, { async: true });
            console.log(`Executed ${flow.name}: ${result.execution_id}`);
        }
    } catch (error) {
        console.error('Error:', error.message);
    }
}

main();
```
</CodeGroup>

---

*This reference guide provides comprehensive documentation for all CLI commands and options. Use it as a quick lookup when building automation scripts or integrating the CLI into your workflows.*