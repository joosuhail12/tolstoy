---
title: "Actions Commands"
description: "Manage actions and execute single-step operations from the command line using the Tolstoy CLI action commands."
---

# Actions Commands

The `tolstoy actions` command group provides complete action management from the command line. Use these commands to list, execute, and manage individual actions that can be composed into workflows.

## Quick Reference

| Command | Description | Usage |
|---------|-------------|--------|
| `list` | List all available actions | `tolstoy actions list [options]` |
| `get` | Get action details and schema | `tolstoy actions get <action-key>` |
| `execute` | Execute a single action | `tolstoy actions execute <action-key> [inputs]` |
| `create` | Create new custom action | `tolstoy actions create <file>` |
| `update` | Update existing action | `tolstoy actions update <action-key> <file>` |
| `delete` | Delete custom action | `tolstoy actions delete <action-key>` |
| `validate` | Validate action definition | `tolstoy actions validate <file>` |
| `test` | Test action with sample inputs | `tolstoy actions test <action-key> [inputs]` |

## Common Usage Patterns

### Development Workflow

```bash
# List available actions by category
tolstoy actions list --category email

# Get detailed information about an action
tolstoy actions get send-email --show-schema

# Test an action with sample inputs
tolstoy actions test send-email '{"to": "test@example.com", "subject": "Test"}'

# Create a custom action
tolstoy actions create ./custom-actions/slack-notification.yml

# Validate action definition before deployment
tolstoy actions validate ./custom-actions/slack-notification.yml
```

### Production Operations

```bash
# Execute single action for immediate tasks
tolstoy actions execute send-slack-alert \
  '{"channel": "#alerts", "message": "System maintenance starting", "priority": "high"}'

# List all custom actions in organization
tolstoy actions list --type custom

# Update production action
tolstoy actions update custom-email-validator ./actions/email-validator-v2.yml

# Get execution history for specific action
tolstoy actions history send-email --since 24h
```

## Action Categories

Actions are organized into categories based on their functionality:

### Communication Actions
- `send-email` - Send emails via configured providers
- `send-sms` - Send SMS messages
- `post-slack-message` - Send Slack notifications
- `send-teams-message` - Microsoft Teams notifications
- `create-jira-ticket` - Create Jira issues

### Data Processing Actions  
- `transform-json` - JSON data transformations
- `validate-data` - Data validation with schema
- `format-text` - Text formatting and templating
- `parse-csv` - CSV file parsing and processing
- `query-database` - Database queries

### Integration Actions
- `http-request` - HTTP API calls
- `webhook-call` - Send webhook notifications
- `file-upload` - Upload files to cloud storage
- `create-calendar-event` - Calendar integrations
- `update-crm-contact` - CRM system updates

### Utility Actions
- `delay` - Add delays to workflows
- `generate-uuid` - Generate unique identifiers
- `timestamp` - Get current timestamps
- `evaluate-condition` - Conditional logic evaluation
- `loop-over-array` - Array iteration processing

## Global Options

All action commands support these global options:

| Option | Description | Example |
|--------|-------------|---------|
| `--api-url` | Override API base URL | `--api-url https://staging-api.tolstoy.dev` |
| `--profile` | Use specific configuration profile | `--profile production` |
| `--json` | Output results in JSON format | `--json` |
| `--verbose` | Enable verbose logging | `--verbose` |
| `--timeout` | Set operation timeout | `--timeout 30s` |
| `--help` | Show command help | `--help` |

## Action Definition Format

Custom actions can be defined in YAML or JSON format:

<CodeGroup>
```yaml YAML Format (Recommended)
# slack-notification.yml
key: custom-slack-notification
name: Enhanced Slack Notification
description: Send rich Slack notifications with custom formatting
category: communication
version: 1

inputSchema:
  - name: channel
    type: string
    required: true
    description: Slack channel (e.g., #general)
    validation:
      pattern: "^#[a-z0-9-_]+$"
  
  - name: message
    type: string
    required: true
    description: Message content
    
  - name: priority
    type: string
    required: false
    default: normal
    enum: [low, normal, high, critical]
    description: Message priority level
    
  - name: mention_users
    type: array
    items:
      type: string
    required: false
    description: Users to mention (@username)

outputSchema:
  - name: message_id
    type: string
    description: Slack message ID
    
  - name: timestamp
    type: string
    description: Message timestamp
    
  - name: channel_id
    type: string
    description: Channel ID where message was sent

logic:
  type: http
  method: POST
  url: "https://slack.com/api/chat.postMessage"
  headers:
    Authorization: "Bearer {{config.slack_token}}"
    Content-Type: "application/json"
  body:
    channel: "{{inputs.channel}}"
    text: "{{inputs.message}}"
    username: "Tolstoy Bot"
    icon_emoji: ":robot_face:"
    blocks: |
      [
        {
          "type": "section",
          "text": {
            "type": "mrkdwn",
            "text": "{{inputs.message}}"
          }
        }
      ]

settings:
  timeout: 10000
  retryPolicy:
    maxRetries: 3
    retryDelay: 1000
  errorHandling: throw

tags:
  - communication
  - slack
  - notifications
  - custom
```

```json JSON Format
{
  "key": "custom-slack-notification",
  "name": "Enhanced Slack Notification",
  "description": "Send rich Slack notifications with custom formatting",
  "category": "communication",
  "version": 1,
  "inputSchema": [
    {
      "name": "channel",
      "type": "string",
      "required": true,
      "description": "Slack channel (e.g., #general)",
      "validation": {
        "pattern": "^#[a-z0-9-_]+$"
      }
    },
    {
      "name": "message", 
      "type": "string",
      "required": true,
      "description": "Message content"
    }
  ],
  "logic": {
    "type": "http",
    "method": "POST", 
    "url": "https://slack.com/api/chat.postMessage",
    "headers": {
      "Authorization": "Bearer {{config.slack_token}}",
      "Content-Type": "application/json"
    },
    "body": {
      "channel": "{{inputs.channel}}",
      "text": "{{inputs.message}}"
    }
  }
}
```

```javascript JavaScript Logic
// For complex action logic
key: advanced-data-processor
name: Advanced Data Processor
logic:
  type: javascript
  code: |
    function processData(inputs) {
      const { data, transformation } = inputs;
      
      // Custom processing logic
      const processed = data.map(item => {
        switch (transformation) {
          case 'normalize_email':
            return {
              ...item,
              email: item.email.toLowerCase().trim()
            };
          case 'extract_domain':
            return {
              ...item, 
              domain: item.email.split('@')[1]
            };
          default:
            return item;
        }
      });
      
      return {
        processed_data: processed,
        count: processed.length,
        transformation_applied: transformation
      };
    }
    
    return processData(inputs);
```
</CodeGroup>

## Environment Variables

Configure default behavior with environment variables:

```bash
# Default action execution timeout (milliseconds)
export TOLSTOY_ACTION_TIMEOUT=30000

# Default output format for action commands
export TOLSTOY_ACTION_OUTPUT_FORMAT=table

# Enable debug logging for action operations
export TOLSTOY_ACTIONS_DEBUG=true

# Default action validation strictness
export TOLSTOY_ACTION_VALIDATION=strict
```

## Advanced Features

### Action Chaining

Chain multiple actions together for complex operations:

```bash
# Execute a sequence of related actions
tolstoy actions execute validate-email '{"email": "user@example.com"}' | \
tolstoy actions execute create-crm-contact --stdin | \
tolstoy actions execute send-welcome-email --stdin
```

### Batch Execution

Execute actions with multiple input sets:

```bash
# Process multiple records
tolstoy actions execute send-email --batch ./email-recipients.jsonl

# Where email-recipients.jsonl contains:
# {"to": "user1@example.com", "subject": "Welcome", "template": "welcome"}
# {"to": "user2@example.com", "subject": "Welcome", "template": "welcome"}
```

### Custom Action Templates

Create reusable action templates:

```yaml
# action-template.yml
key: "{{ACTION_KEY}}"
name: "{{ACTION_NAME}}"
category: "{{CATEGORY}}"

inputSchema:
  - name: input_param
    type: string
    required: true

logic:
  type: http
  method: "{{HTTP_METHOD}}"
  url: "{{API_ENDPOINT}}"
```

Use with environment variable substitution:

```bash
ACTION_KEY="custom-api-call" \
ACTION_NAME="Custom API Call" \
CATEGORY="integration" \
HTTP_METHOD="POST" \
API_ENDPOINT="https://api.example.com/webhook" \
tolstoy actions create ./action-template.yml
```

## Integration Examples

### CI/CD Action Testing

```yaml
# .github/workflows/test-actions.yml
name: Test Custom Actions
on:
  push:
    paths: ['actions/**']

jobs:
  test-actions:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Tolstoy CLI
        run: npm install -g @tolstoy/cli
        
      - name: Configure CLI
        run: |
          tolstoy config add ci \
            --org-id ${{ secrets.TOLSTOY_ORG_ID }} \
            --user-id ${{ secrets.TOLSTOY_USER_ID }}
            
      - name: Validate Actions
        run: |
          for action_file in actions/*.yml; do
            echo "Validating $action_file"
            tolstoy actions validate "$action_file"
          done
          
      - name: Test Actions
        run: |
          # Test email action
          tolstoy actions test send-email '{
            "to": "test@example.com",
            "subject": "CI Test",
            "body": "Testing from CI pipeline"
          }' --dry-run
          
          # Test Slack action  
          tolstoy actions test send-slack-message '{
            "channel": "#testing",
            "message": "CI pipeline test message"
          }' --dry-run
```

### Monitoring Script

```bash
#!/bin/bash
# monitor-actions.sh - Monitor action execution health

# Check action execution success rates
tolstoy actions stats --since 1h --format json > /tmp/action-stats.json

# Parse statistics
SUCCESS_RATE=$(jq -r '.overall.success_rate' /tmp/action-stats.json)
TOTAL_EXECUTIONS=$(jq -r '.overall.total_executions' /tmp/action-stats.json)

echo "📊 Action Execution Summary (Last Hour)"
echo "Total Executions: $TOTAL_EXECUTIONS"
echo "Success Rate: $SUCCESS_RATE%"

# Alert if success rate is low
if (( $(echo "$SUCCESS_RATE < 95" | bc -l) )); then
  echo "⚠️ Low success rate detected: $SUCCESS_RATE%"
  
  # Send alert via action
  tolstoy actions execute send-alert '{
    "message": "Action execution success rate is below 95%: '${SUCCESS_RATE}'%",
    "severity": "warning",
    "metric": "action_success_rate",
    "value": '${SUCCESS_RATE}'
  }'
fi

# Check for failed actions
FAILED_ACTIONS=$(jq -r '.by_action[] | select(.success_rate < 90) | .action_key' /tmp/action-stats.json)

if [ -n "$FAILED_ACTIONS" ]; then
  echo "❌ Actions with low success rates:"
  echo "$FAILED_ACTIONS" | while read -r action; do
    echo "  - $action"
  done
fi

# Cleanup
rm -f /tmp/action-stats.json
```

## Best Practices

### Action Development

1. **Use descriptive keys**: `send-welcome-email` instead of `email1`
2. **Comprehensive input validation**: Define clear schemas with validation rules
3. **Error handling**: Implement proper error messages and retry logic
4. **Documentation**: Include detailed descriptions and examples
5. **Testing**: Test actions thoroughly before deploying to production

### Action Organization

```bash
# Recommended directory structure
actions/
├── communication/
│   ├── send-email.yml
│   ├── send-sms.yml
│   └── slack-notification.yml
├── data-processing/
│   ├── validate-data.yml
│   ├── transform-json.yml
│   └── csv-parser.yml
├── integrations/
│   ├── crm-update.yml
│   ├── webhook-sender.yml
│   └── api-caller.yml
└── utilities/
    ├── delay.yml
    ├── uuid-generator.yml
    └── timestamp.yml
```

### Performance Optimization

1. **Set appropriate timeouts**: Balance reliability with performance
2. **Use retry policies**: Handle transient failures gracefully  
3. **Minimize external dependencies**: Reduce network calls where possible
4. **Cache results**: Use action outputs efficiently in workflows
5. **Monitor performance**: Track execution times and success rates

## Troubleshooting

### Common Issues

<details>
<summary>**Action not found error**</summary>

**Symptoms**: `Error: Action 'my-action' not found`

**Solutions**:
```bash
# Check if action exists
tolstoy actions list --filter my-action

# Check action key spelling
tolstoy actions list | grep -i my-action

# Verify action is deployed
tolstoy actions get my-action
```
</details>

<details>
<summary>**Input validation failed**</summary>

**Symptoms**: `Error: Input validation failed: field 'email' is required`

**Solutions**:
```bash
# Check action schema
tolstoy actions get send-email --show-schema

# Validate input format
echo '{"email": "test@example.com"}' | jq '.'

# Test with dry-run
tolstoy actions execute send-email '{"email": "test@example.com"}' --dry-run
```
</details>

<details>
<summary>**Action execution timeout**</summary>

**Symptoms**: `Error: Action execution timed out after 30s`

**Solutions**:
```bash
# Increase timeout
tolstoy actions execute slow-action --timeout 60s

# Check action performance
tolstoy actions stats slow-action --metric duration

# Use async execution for long-running actions
tolstoy actions execute slow-action --async
```
</details>

## Next Steps

<CardGroup cols={2}>
  <Card title="List Actions" icon="list" href="/cli/commands/actions/list">
    Learn to discover and filter available actions
  </Card>
  <Card title="Execute Actions" icon="play" href="/cli/commands/actions/execute">
    Master action execution with various input methods
  </Card>
</CardGroup>

<CardGroup cols={2}>
  <Card title="Create Custom Actions" icon="plus" href="/cli/commands/actions/create">
    Build your own reusable actions
  </Card>
  <Card title="Action Best Practices" icon="star" href="/cli/guides/action-development">
    Learn action development best practices
  </Card>
</CardGroup>

---

*Actions are the building blocks of workflows. Master these commands to create powerful, reusable automation components that can be composed into complex workflows.*